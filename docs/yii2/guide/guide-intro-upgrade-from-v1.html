<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="language" content="en" />
        <link href="./assets/2d682564/css/bootstrap.css" rel="stylesheet">
<link href="./assets/c1dfe5da/style.css" rel="stylesheet">
<script src="./assets/3fea3897/jquery.js"></script>
<script src="./assets/2d682564/js/bootstrap.js"></script>
<script src="./assets/ade0d1a4/jssearch.js"></script>    <title>Yii Framework 2.0 API Documentation</title>
</head>
<body>

<div class="wrap">
    <nav id="w430" class="navbar-inverse navbar-fixed-top navbar" role="navigation"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#w430-collapse"><span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></button><a class="navbar-brand" href="./guide-index.html">Yii Framework 2.0 API Documentation</a></div><div id="w430-collapse" class="collapse navbar-collapse"><ul id="w431" class="navbar-nav nav"><li><a href="./guide-README.html">Guide</a></li></ul><div class="navbar-form navbar-left" role="search">
  <div class="form-group">
    <input id="searchbox" type="text" class="form-control" placeholder="Search">
  </div>
</div>
</div></nav>
    <div id="search-resultbox" style="display: none;" class="modal-content">
        <ul id="search-results">
        </ul>
    </div>

    
<div class="row">
    <div class="col-md-2">
                <div id="navigation" class="list-group"><a class="list-group-item active" href="#navigation-414" data-toggle="collapse" data-parent="#navigation">Introduction <b class="caret"></b></a><div id="navigation-414" class="submenu panel-collapse collapse in"><a class="list-group-item" href="./guide-intro-yii.html">About Yii</a>
<a class="list-group-item active" href="./guide-intro-upgrade-from-v1.html">Upgrading from Version 1.1</a></div>
<a class="list-group-item" href="#navigation-415" data-toggle="collapse" data-parent="#navigation">Getting Started <b class="caret"></b></a><div id="navigation-415" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-start-installation.html">Installing Yii</a>
<a class="list-group-item" href="./guide-start-workflow.html">Running Applications</a>
<a class="list-group-item" href="./guide-start-hello.html">Saying Hello</a>
<a class="list-group-item" href="./guide-start-forms.html">Working with Forms</a>
<a class="list-group-item" href="./guide-start-databases.html">Working with Databases</a>
<a class="list-group-item" href="./guide-start-gii.html">Generating Code with Gii</a>
<a class="list-group-item" href="./guide-start-looking-ahead.html">Looking Ahead</a></div>
<a class="list-group-item" href="#navigation-416" data-toggle="collapse" data-parent="#navigation">Application Structure <b class="caret"></b></a><div id="navigation-416" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-structure-overview.html">Overview</a>
<a class="list-group-item" href="./guide-structure-entry-scripts.html">Entry Scripts</a>
<a class="list-group-item" href="./guide-structure-applications.html">Applications</a>
<a class="list-group-item" href="./guide-structure-application-components.html">Application Components</a>
<a class="list-group-item" href="./guide-structure-controllers.html">Controllers</a>
<a class="list-group-item" href="./guide-structure-models.html">Models</a>
<a class="list-group-item" href="./guide-structure-views.html">Views</a>
<a class="list-group-item" href="./guide-structure-modules.html">Modules</a>
<a class="list-group-item" href="./guide-structure-filters.html">Filters</a>
<a class="list-group-item" href="./guide-structure-widgets.html">Widgets</a>
<a class="list-group-item" href="./guide-structure-assets.html">Assets</a>
<a class="list-group-item" href="./guide-structure-extensions.html">Extensions</a></div>
<a class="list-group-item" href="#navigation-417" data-toggle="collapse" data-parent="#navigation">Handling Requests <b class="caret"></b></a><div id="navigation-417" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-runtime-overview.html">Overview</a>
<a class="list-group-item" href="./guide-runtime-bootstrapping.html">Bootstrapping</a>
<a class="list-group-item" href="./guide-runtime-routing.html">Routing</a>
<a class="list-group-item" href="./guide-runtime-requests.html">Requests</a>
<a class="list-group-item" href="./guide-runtime-responses.html">Responses</a>
<a class="list-group-item" href="./guide-runtime-sessions-cookies.html">Sessions and Cookies</a>
<a class="list-group-item" href="./guide-runtime-url-handling.html">URL Parsing and Generation</a>
<a class="list-group-item" href="./guide-runtime-handling-errors.html">Handling Errors</a>
<a class="list-group-item" href="./guide-runtime-logging.html">Logging</a></div>
<a class="list-group-item" href="#navigation-418" data-toggle="collapse" data-parent="#navigation">Key Concepts <b class="caret"></b></a><div id="navigation-418" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-concept-components.html">Components</a>
<a class="list-group-item" href="./guide-concept-properties.html">Properties</a>
<a class="list-group-item" href="./guide-concept-events.html">Events</a>
<a class="list-group-item" href="./guide-concept-behaviors.html">Behaviors</a>
<a class="list-group-item" href="./guide-concept-configurations.html">Configurations</a>
<a class="list-group-item" href="./guide-concept-aliases.html">Aliases</a>
<a class="list-group-item" href="./guide-concept-autoloading.html">Class Autoloading</a>
<a class="list-group-item" href="./guide-concept-service-locator.html">Service Locator</a>
<a class="list-group-item" href="./guide-concept-di-container.html">Dependency Injection Container</a></div>
<a class="list-group-item" href="#navigation-419" data-toggle="collapse" data-parent="#navigation">Working with Databases <b class="caret"></b></a><div id="navigation-419" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-db-dao.html">Data Access Objects</a>
<a class="list-group-item" href="./guide-db-query-builder.html">Query Builder</a>
<a class="list-group-item" href="./guide-db-active-record.html">Active Record</a>
<a class="list-group-item" href="./guide-db-migrations.html">Migrations</a>
<a class="list-group-item" href="./guide-db-sphinx.html">Sphinx</a>
<a class="list-group-item" href="./guide-db-redis.html">Redis</a>
<a class="list-group-item" href="./guide-db-mongodb.html">MongoDB</a>
<a class="list-group-item" href="./guide-db-elasticsearch.html">ElasticSearch</a></div>
<a class="list-group-item" href="#navigation-420" data-toggle="collapse" data-parent="#navigation">Getting Data from Users <b class="caret"></b></a><div id="navigation-420" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-input-forms.html">Creating Forms</a>
<a class="list-group-item" href="./guide-input-validation.html">Validating Input</a>
<a class="list-group-item" href="./guide-input-file-upload.html">Uploading Files</a>
<a class="list-group-item" href="./guide-input-multiple-models.html">Getting Data for Multiple Models</a></div>
<a class="list-group-item" href="#navigation-421" data-toggle="collapse" data-parent="#navigation">Displaying Data <b class="caret"></b></a><div id="navigation-421" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-output-formatter.html">Data Formatting</a>
<a class="list-group-item" href="./guide-output-pagination.html">Pagination</a>
<a class="list-group-item" href="./guide-output-sorting.html">Sorting</a>
<a class="list-group-item" href="./guide-output-data-providers.html">Data Providers</a>
<a class="list-group-item" href="./guide-output-data-widgets.html">Data Widgets</a>
<a class="list-group-item" href="./guide-output-client-scripts.html">Working with Client Scripts</a>
<a class="list-group-item" href="./guide-output-theming.html">Theming</a></div>
<a class="list-group-item" href="#navigation-422" data-toggle="collapse" data-parent="#navigation">Security <b class="caret"></b></a><div id="navigation-422" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-security-authentication.html">Authentication</a>
<a class="list-group-item" href="./guide-security-authorization.html">Authorization</a>
<a class="list-group-item" href="./guide-security-passwords.html">Working with Passwords</a>
<a class="list-group-item" href="./guide-security-auth-clients.html">Auth Clients</a>
<a class="list-group-item" href="./guide-security-best-practices.html">Best Practices</a></div>
<a class="list-group-item" href="#navigation-423" data-toggle="collapse" data-parent="#navigation">Caching <b class="caret"></b></a><div id="navigation-423" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-caching-overview.html">Overview</a>
<a class="list-group-item" href="./guide-caching-data.html">Data Caching</a>
<a class="list-group-item" href="./guide-caching-fragment.html">Fragment Caching</a>
<a class="list-group-item" href="./guide-caching-page.html">Page Caching</a>
<a class="list-group-item" href="./guide-caching-http.html">HTTP Caching</a></div>
<a class="list-group-item" href="#navigation-424" data-toggle="collapse" data-parent="#navigation">RESTful Web Services <b class="caret"></b></a><div id="navigation-424" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-rest-quick-start.html">Quick Start</a>
<a class="list-group-item" href="./guide-rest-resources.html">Resources</a>
<a class="list-group-item" href="./guide-rest-controllers.html">Controllers</a>
<a class="list-group-item" href="./guide-rest-routing.html">Routing</a>
<a class="list-group-item" href="./guide-rest-response-formatting.html">Response Formatting</a>
<a class="list-group-item" href="./guide-rest-authentication.html">Authentication</a>
<a class="list-group-item" href="./guide-rest-rate-limiting.html">Rate Limiting</a>
<a class="list-group-item" href="./guide-rest-versioning.html">Versioning</a>
<a class="list-group-item" href="./guide-rest-error-handling.html">Error Handling</a></div>
<a class="list-group-item" href="#navigation-425" data-toggle="collapse" data-parent="#navigation">Development Tools <b class="caret"></b></a><div id="navigation-425" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-tool-debugger.html">Debug Toolbar and Debugger</a>
<a class="list-group-item" href="./guide-tool-gii.html">Generating Code using Gii</a>
<a class="list-group-item" href="./guide-tool-api-doc.html">Generating API Documentation</a></div>
<a class="list-group-item" href="#navigation-426" data-toggle="collapse" data-parent="#navigation">Testing <b class="caret"></b></a><div id="navigation-426" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-test-overview.html">Overview</a>
<a class="list-group-item" href="./guide-test-environment-setup.html">Testing environment setup</a>
<a class="list-group-item" href="./guide-test-unit.html">Unit Tests</a>
<a class="list-group-item" href="./guide-test-functional.html">Functional Tests</a>
<a class="list-group-item" href="./guide-test-acceptance.html">Acceptance Tests</a>
<a class="list-group-item" href="./guide-test-fixtures.html">Fixtures</a></div>
<a class="list-group-item" href="#navigation-427" data-toggle="collapse" data-parent="#navigation">Special Topics <b class="caret"></b></a><div id="navigation-427" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-tutorial-advanced-app.html">Advanced Application Template</a>
<a class="list-group-item" href="./guide-tutorial-start-from-scratch.html">Building Application from Scratch</a>
<a class="list-group-item" href="./guide-tutorial-console.html">Console Commands</a>
<a class="list-group-item" href="./guide-tutorial-core-validators.html">Core Validators</a>
<a class="list-group-item" href="./guide-tutorial-i18n.html">Internationalization</a>
<a class="list-group-item" href="./guide-tutorial-mailing.html">Mailing</a>
<a class="list-group-item" href="./guide-tutorial-performance-tuning.html">Performance Tuning</a>
<a class="list-group-item" href="./guide-tutorial-shared-hosting.html">Shared Hosting Environment</a>
<a class="list-group-item" href="./guide-tutorial-template-engines.html">Template Engines</a>
<a class="list-group-item" href="./guide-tutorial-yii-integration.html">Working with Third-Party Code</a></div>
<a class="list-group-item" href="#navigation-428" data-toggle="collapse" data-parent="#navigation">Widgets <b class="caret"></b></a><div id="navigation-428" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-widget-bootstrap.html">Bootstrap Widgets</a>
<a class="list-group-item" href="./guide-widget-jui.html">Jquery UI Widgets</a></div>
<a class="list-group-item" href="#navigation-429" data-toggle="collapse" data-parent="#navigation">Helpers <b class="caret"></b></a><div id="navigation-429" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-helper-overview.html">Overview</a>
<a class="list-group-item" href="./guide-helper-array.html">ArrayHelper</a>
<a class="list-group-item" href="./guide-helper-html.html">Html</a>
<a class="list-group-item" href="./guide-helper-url.html">Url</a>
<a class="list-group-item" href="./guide-helper-security.html">Security</a></div></div>    </div>
    <div class="col-md-9 guide-content" role="main">
        <h1>Upgrading from Version 1.1 <a href="#upgrading-from-version-11" name="upgrading-from-version-11" class="hashlink">&para;</a></h1><p>There are many differences between versions 1.1 and 2.0 of Yii as the framework was completely rewritten for 2.0.
As a result, upgrading from version 1.1 is not as trivial as upgrading between minor versions. In this guide you'll
find the major differences between the two versions.</p>
<p>If you have not used Yii 1.1 before, you can safely skip this section and turn directly to "<a href="guide-start-installation.html">Getting started</a>".</p>
<p>Please note that Yii 2.0 introduces more new features than are covered in this summary. It is highly recommended
that you read through the whole definitive guide to learn about them all. Chances are that
some features you previously had to develop for yourself are now part of the core code.</p>
<h2>Installation <a href="#installation" name="installation" class="hashlink">&para;</a></h2><p>Yii 2.0 fully embraces <a href="https://getcomposer.org/">Composer</a>, the de facto PHP package manager. Installation
of the core framework, as well as extensions, are handled through Composer. Please refer to
the <a href="guide-start-installation.html">Installing Yii</a> section to learn how to install Yii 2.0. If you want to
create new extensions, or turn your existing 1.1 extensions into 2.0-compatible extensions, please refer to
the <a href="guide-structure-extensions.html#creating-extensions">Creating Extensions</a> section of the guide.</p>
<h2>PHP Requirements <a href="#php-requirements" name="php-requirements" class="hashlink">&para;</a></h2><p>Yii 2.0 requires PHP 5.4 or above, which is a huge improvement over PHP version 5.2 that is required by Yii 1.1.
As a result, there are many differences on the language level that you should pay attention to.
Below is a summary of the major changes regarding PHP:</p>
<ul>
<li><a href="http://php.net/manual/en/language.namespaces.php">Namespaces</a>.</li>
<li><a href="http://php.net/manual/en/functions.anonymous.php">Anonymous functions</a>.</li>
<li>Short array syntax <code>[...elements...]</code> is used instead of <code>array(...elements...)</code>.</li>
<li>Short echo tags <code>&lt;?=</code> are used in view files. This is safe to use starting from PHP 5.4.</li>
<li><a href="http://php.net/manual/en/book.spl.php">SPL classes and interfaces</a>.</li>
<li><a href="http://php.net/manual/en/language.oop5.late-static-bindings.php">Late Static Bindings</a>.</li>
<li><a href="http://php.net/manual/en/book.datetime.php">Date and Time</a>.</li>
<li><a href="http://php.net/manual/en/language.oop5.traits.php">Traits</a>.</li>
<li><a href="http://php.net/manual/en/book.intl.php">intl</a>. Yii 2.0 makes use of the <code>intl</code> PHP extension
to support internationalization features.</li>
</ul>
<h2>Namespace <a href="#namespace" name="namespace" class="hashlink">&para;</a></h2><p>The most obvious change in Yii 2.0 is the use of namespaces. Almost every core class
is namespaced, e.g., <code>yii\web\Request</code>. The "C" prefix is no longer used in class names.
The naming scheme now follows the directory structure. For example, <code>yii\web\Request</code>
indicates that the corresponding class file is <code>web/Request.php</code> under the Yii framework folder.</p>
<p>(You can use any core class without explicitly including that class file, thanks to the Yii
class loader.)</p>
<h2>Component and Object <a href="#component-and-object" name="component-and-object" class="hashlink">&para;</a></h2><p>Yii 2.0 breaks the <code>CComponent</code> class in 1.1 into two classes: <span style="background: #f00;">yii\base\Object</span> and <span style="background: #f00;">yii\base\Component</span>.
The <span style="background: #f00;">yii\base\Object</span> class is a lightweight base class that allows defining <a href="guide-concept-properties.html">object properties</a>
via getters and setters. The <span style="background: #f00;">yii\base\Component</span> class extends from <span style="background: #f00;">yii\base\Object</span> and supports
<a href="guide-concept-events.html">events</a> and <a href="guide-concept-behaviors.html">behaviors</a>.</p>
<p>If your class does not need the event or behavior feature, you should consider using
<span style="background: #f00;">yii\base\Object</span> as the base class. This is usually the case for classes that represent basic
data structures.</p>
<h2>Object Configuration <a href="#object-configuration" name="object-configuration" class="hashlink">&para;</a></h2><p>The <span style="background: #f00;">yii\base\Object</span> class introduces a uniform way of configuring objects. Any descendant class
of <span style="background: #f00;">yii\base\Object</span> should declare its constructor (if needed) in the following way so that
it can be properly configured:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">MyClass&nbsp;</span><span style="color: #007700">extends&nbsp;\</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">base</span><span style="color: #007700">\</span><span style="color: #0000BB">Object<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">__construct</span><span style="color: #007700">(</span><span style="color: #0000BB">$param1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$param2</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$config&nbsp;</span><span style="color: #007700">=&nbsp;[])<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;...&nbsp;initialization&nbsp;before&nbsp;configuration&nbsp;is&nbsp;applied<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">__construct</span><span style="color: #007700">(</span><span style="color: #0000BB">$config</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">init</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">init</span><span style="color: #007700">();<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;...&nbsp;initialization&nbsp;after&nbsp;configuration&nbsp;is&nbsp;applied<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br />}</span></code></pre>
<p>In the above, the last parameter of the constructor must take a configuration array
that contains name-value pairs for initializing the properties at the end of the constructor.
You can override the <span style="background: #f00;">yii\base\Object::init()</span> method to do initialization work that should be done after
the configuration has been applied.</p>
<p>By following this convention, you will be able to create and configure new objects
using a configuration array:</p>
<pre><code class="language-php"><span style="color: #0000BB">$object&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Yii</span><span style="color: #007700">::</span><span style="color: #0000BB">createObject</span><span style="color: #007700">([<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'class'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'MyClass'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'property1'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'abc'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'property2'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'cde'</span><span style="color: #007700">,<br />],&nbsp;[</span><span style="color: #0000BB">$param1</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$param2</span><span style="color: #007700">]);</span></code></pre>
<p>More details about configurations can be found in the <a href="guide-concept-configurations.html">Object Configurations</a> section.</p>
<h2>Events <a href="#events" name="events" class="hashlink">&para;</a></h2><p>In Yii 1, events were created by defining an <code>on</code>-method (e.g., <code>onBeforeSave</code>). In Yii 2, you can now use any event name. You trigger an event by calling
the <span style="background: #f00;">yii\base\Component::trigger()</span> method:</p>
<pre><code class="language-php"><span style="color: #0000BB">$event&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;\</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">base</span><span style="color: #007700">\</span><span style="color: #0000BB">Event</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$component</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">trigger</span><span style="color: #007700">(</span><span style="color: #0000BB">$eventName</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$event</span><span style="color: #007700">);</span></code></pre>
<p>To attach a handler to an event, use the <span style="background: #f00;">yii\base\Component::on()</span> method:</p>
<pre><code class="language-php"><span style="color: #0000BB">$component</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">on</span><span style="color: #007700">(</span><span style="color: #0000BB">$eventName</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$handler</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;To&nbsp;detach&nbsp;the&nbsp;handler,&nbsp;use:<br />//&nbsp;$component-&gt;off($eventName,&nbsp;$handler);</span></code></pre>
<p>There are many enhancements to the event features. For more details, please refer to the <a href="guide-concept-events.html">Events</a> section.</p>
<h2>Path Aliases <a href="#path-aliases" name="path-aliases" class="hashlink">&para;</a></h2><p>Yii 2.0 expands the usage of path aliases to both file/directory paths and URLs. Yii 2.0 also now requires
an alias name to start with the <code>@</code> character, to differentiate aliases from normal file/directory paths or URLs.
For example, the alias <code>@yii</code> refers to the Yii installation directory. Path aliases are
supported in most places in the Yii core code. For example, <span style="background: #f00;">yii\caching\FileCache::cachePath</span> can take
both a path alias and a normal directory path.</p>
<p>A path alias is also closely related to a class namespace. It is recommended that a path
alias be defined for each root namespace, thereby allowing you to use Yii the class autoloader without
any further configuration. For example, because <code>@yii</code> refers to the Yii installation directory,
a class like <code>yii\web\Request</code> can be autoloaded. If you use a third party library,
such as the Zend Framework, you may define a path alias <code>@Zend</code> that refers to that framework's installation
directory. Once you've done that, Yii will be able to autoload any class in that Zend Framework library, too.</p>
<p>More on path aliases can be found in the <a href="guide-concept-aliases.html">Path Aliases</a> section.</p>
<h2>Views <a href="#views" name="views" class="hashlink">&para;</a></h2><p>The most significant change about views in Yii 2 is that the special variable <code>$this</code> in a view no longer refers to
the current controller or widget. Instead, <code>$this</code> now refers to a <em>view</em> object, a new concept
introduced in 2.0. The <em>view</em> object is of type <span style="background: #f00;">yii\web\View</span>, which represents the view part
of the MVC pattern. If you want to access the controller or widget in a view, you can use <code>$this-&gt;context</code>.</p>
<p>To render a partial view within another view, you use <code>$this-&gt;render()</code>, not <code>$this-&gt;renderPartial()</code>. The call to <code>render</code> also now has to be explicitly echoed, as the <code>render()</code> method returns the rendering
result, rather than directly displaying it. For example:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">render</span><span style="color: #007700">(</span><span style="color: #DD0000">'_item'</span><span style="color: #007700">,&nbsp;[</span><span style="color: #DD0000">'item'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$item</span><span style="color: #007700">]);</span></code></pre>
<p>Besides using PHP as the primary template language, Yii 2.0 is also equipped with official
support for two popular template engines: Smarty and Twig. The Prado template engine is no longer supported.
To use these template engines, you need to configure the <code>view</code> application component by setting the
<span style="background: #f00;">yii\base\View::$renderers</span> property. Please refer to the <a href="guide-tutorial-template-engines.html">Template Engines</a>
section for more details.</p>
<h2>Models <a href="#models" name="models" class="hashlink">&para;</a></h2><p>Yii 2.0 uses <span style="background: #f00;">yii\base\Model</span> as the base model, similar to <code>CModel</code> in 1.1.
The class <code>CFormModel</code> has been dropped entirely. Instead, in Yii 2 you should extend <span style="background: #f00;">yii\base\Model</span> to create a form model class.</p>
<p>Yii 2.0 introduces a new method called <span style="background: #f00;">yii\base\Model::scenarios()</span> to declare
supported scenarios, and to indicate under which scenario an attribute needs to be validated, can be considered as safe or not, etc. For example:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">scenarios</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'backend'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'email'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'role'</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'frontend'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'email'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'!role'</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;];<br />}</span></code></pre>
<p>In the above, two scenarios are declared: <code>backend</code> and <code>frontend</code>. For the <code>backend</code> scenario, both the
<code>email</code> and <code>role</code> attributes are safe, and can be massively assigned. For the <code>frontend</code> scenario,
<code>email</code> can be massively assigned while <code>role</code> cannot. Both <code>email</code> and <code>role</code> should be validated using rules.</p>
<p>The <span style="background: #f00;">yii\base\Model::rules()</span> method is still used to declare the validation rules. Note that due to the introduction of <span style="background: #f00;">yii\base\Model::scenarios()</span>, there is no longer an <code>unsafe</code> validator.</p>
<p>In most cases, you do not need to override <span style="background: #f00;">yii\base\Model::scenarios()</span>
if the <span style="background: #f00;">yii\base\Model::rules()</span> method fully specifies the scenarios that will exist, and if there is no need to declare
<code>unsafe</code> attributes.</p>
<p>To learn more details about models, please refer to the <a href="guide-structure-models.html">Models</a> section.</p>
<h2>Controllers <a href="#controllers" name="controllers" class="hashlink">&para;</a></h2><p>Yii 2.0 uses <span style="background: #f00;">yii\web\Controller</span> as the base controller class, which is similar to <code>CController</code> in Yii 1.1.
<span style="background: #f00;">yii\base\Action</span> is the base class for action classes.</p>
<p>The most obvious impact of these changes on your code is that a controller action should return the content
that you want to render instead of echoing it:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">actionView</span><span style="color: #007700">(</span><span style="color: #0000BB">$id</span><span style="color: #007700">)<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$model&nbsp;</span><span style="color: #007700">=&nbsp;\</span><span style="color: #0000BB">app</span><span style="color: #007700">\</span><span style="color: #0000BB">models</span><span style="color: #007700">\</span><span style="color: #0000BB">Post</span><span style="color: #007700">::</span><span style="color: #0000BB">findOne</span><span style="color: #007700">(</span><span style="color: #0000BB">$id</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$model</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">render</span><span style="color: #007700">(</span><span style="color: #DD0000">'view'</span><span style="color: #007700">,&nbsp;[</span><span style="color: #DD0000">'model'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$model</span><span style="color: #007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;\</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">web</span><span style="color: #007700">\</span><span style="color: #0000BB">NotFoundHttpException</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}</span></code></pre>
<p>Please refer to the <a href="guide-structure-controllers.html">Controllers</a> section for more details about controllers.</p>
<h2>Widgets <a href="#widgets" name="widgets" class="hashlink">&para;</a></h2><p>Yii 2.0 uses <span style="background: #f00;">yii\base\Widget</span> as the base widget class, similar to <code>CWidget</code> in Yii 1.1.</p>
<p>To get better support for the framework in IDEs, Yii 2.0 introduces a new syntax for using widgets. The static methods
<span style="background: #f00;">yii\base\Widget::begin()</span>, <span style="background: #f00;">yii\base\Widget::end()</span>, and <span style="background: #f00;">yii\base\Widget::widget()</span>
have been introduced, to be used like so:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">use&nbsp;</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">widgets</span><span style="color: #007700">\</span><span style="color: #0000BB">Menu</span><span style="color: #007700">;<br />use&nbsp;</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">widgets</span><span style="color: #007700">\</span><span style="color: #0000BB">ActiveForm</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;Note&nbsp;that&nbsp;you&nbsp;have&nbsp;to&nbsp;"echo"&nbsp;the&nbsp;result&nbsp;to&nbsp;display&nbsp;it<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">Menu</span><span style="color: #007700">::</span><span style="color: #0000BB">widget</span><span style="color: #007700">([</span><span style="color: #DD0000">'items'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$items</span><span style="color: #007700">]);<br /><br /></span><span style="color: #FF8000">//&nbsp;Passing&nbsp;an&nbsp;array&nbsp;to&nbsp;initialize&nbsp;the&nbsp;object&nbsp;properties<br /></span><span style="color: #0000BB">$form&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">ActiveForm</span><span style="color: #007700">::</span><span style="color: #0000BB">begin</span><span style="color: #007700">([<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'options'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'class'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'form-horizontal'</span><span style="color: #007700">],<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'fieldConfig'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'inputOptions'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'class'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'input-xlarge'</span><span style="color: #007700">]],<br />]);<br />...&nbsp;</span><span style="color: #0000BB">form&nbsp;input&nbsp;fields&nbsp;here&nbsp;</span><span style="color: #007700">...<br /></span><span style="color: #0000BB">ActiveForm</span><span style="color: #007700">::</span><span style="color: #0000BB">end</span><span style="color: #007700">();</span></code></pre>
<p>Please refer to the <a href="guide-structure-widgets.html">Widgets</a> section for more details.</p>
<h2>Themes <a href="#themes" name="themes" class="hashlink">&para;</a></h2><p>Themes work completely differently in 2.0. They are now based on a path mapping mechanism that maps a source
view file path to a themed view file path. For example, if the path map for a theme is
<code>['/web/views' =&gt; '/web/themes/basic']</code>, then the themed version for the view file
<code>/web/views/site/index.php</code> will be <code>/web/themes/basic/site/index.php</code>. For this reason, themes can now
be applied to any view file, even a view rendered outside of the context of a controller or a widget.</p>
<p>Also, there is no more <code>CThemeManager</code> component. Instead, <code>theme</code> is a configurable property of the <code>view</code>
application component.</p>
<p>Please refer to the <a href="guide-output-theming.html">Theming</a> section for more details.</p>
<h2>Console Applications <a href="#console-applications" name="console-applications" class="hashlink">&para;</a></h2><p>Console applications are now organized as controllers, like Web applications. Console controllers
should extend from <span style="background: #f00;">yii\console\Controller</span>, similar to <code>CConsoleCommand</code> in 1.1.</p>
<p>To run a console command, use <code>yii &lt;route&gt;</code>, where <code>&lt;route&gt;</code> stands for a controller route
(e.g. <code>sitemap/index</code>). Additional anonymous arguments are passed as the parameters to the
corresponding controller action method, while named arguments are parsed according to
the declarations in <span style="background: #f00;">yii\console\Controller::options()</span>.</p>
<p>Yii 2.0 supports automatic generation of command help information from comment blocks.</p>
<p>Please refer to the <a href="guide-tutorial-console.html">Console Commands</a> section for more details.</p>
<h2>I18N <a href="#i18n" name="i18n" class="hashlink">&para;</a></h2><p>Yii 2.0 removes the built-in date formatter and number formatter pieces in favor of the <a href="http://pecl.php.net/package/intl">PECL intl PHP module</a>.</p>
<p>Message translation is now performed via the <code>i18n</code> application component.
This component manages a set of message sources, which allows you to use different message
sources based on message categories.</p>
<p>Please refer to the <a href="guide-tutorial-i18n.html">Internationalization</a> section for more details.</p>
<h2>Action Filters <a href="#action-filters" name="action-filters" class="hashlink">&para;</a></h2><p>Action filters are implemented via behaviors now. To define a new, custom filter, extend from <span style="background: #f00;">yii\base\ActionFilter</span>. To use a filter, attach the filter class to the controller
as a behavior. For example, to use the <span style="background: #f00;">yii\filters\AccessControl</span> filter, you would have the following
code in a controller:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">behaviors</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'access'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'class'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'yii\filters\AccessControl'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'rules'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[</span><span style="color: #DD0000">'allow'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'actions'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'admin'</span><span style="color: #007700">],&nbsp;</span><span style="color: #DD0000">'roles'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'@'</span><span style="color: #007700">]],<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<br />&nbsp;&nbsp;&nbsp;&nbsp;];<br />}</span></code></pre>
<p>Please refer to the <a href="guide-structure-filters.html">Filtering</a> section for more details.</p>
<h2>Assets <a href="#assets" name="assets" class="hashlink">&para;</a></h2><p>Yii 2.0 introduces a new concept called <em>asset bundle</em> that replaces the script package concept found in Yii 1.1.</p>
<p>An asset bundle is a collection of asset files (e.g. JavaScript files, CSS files, image files, etc.)
within a directory. Each asset bundle is represented as a class extending <span style="background: #f00;">yii\web\AssetBundle</span>.
By registering an asset bundle via <span style="background: #f00;">yii\web\AssetBundle::register()</span>, you make
the assets in that bundle accessible via the Web. Unlike in Yii 1, the page registering the bundle will automatically
contain the references to the JavaScript and CSS files specified in that bundle.</p>
<p>Please refer to the <a href="guide-structure-assets.html">Managing Assets</a> section for more details.</p>
<h2>Helpers <a href="#helpers" name="helpers" class="hashlink">&para;</a></h2><p>Yii 2.0 introduces many commonly used static helper classes, including.</p>
<ul>
<li><span style="background: #f00;">yii\helpers\Html</span></li>
<li><span style="background: #f00;">yii\helpers\ArrayHelper</span></li>
<li><span style="background: #f00;">yii\helpers\StringHelper</span></li>
<li><span style="background: #f00;">yii\helpers\FileHelper</span></li>
<li><span style="background: #f00;">yii\helpers\Json</span></li>
</ul>
<p>Please refer to the <a href="guide-helper-overview.html">Helper Overview</a> section for more details.</p>
<h2>Forms <a href="#forms" name="forms" class="hashlink">&para;</a></h2><p>Yii 2.0 introduces the <em>field</em> concept for building a form using <span style="background: #f00;">yii\widgets\ActiveForm</span>. A field
is a container consisting of a label, an input, an error message, and/or a hint text.
A field is represented as an <span style="background: #f00;">yii\widgets\ActiveField</span> object.
Using fields, you can build a form more cleanly than before:</p>
<pre><code class="language-php"><span style="color: #0000BB">&lt;?php&nbsp;$form&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">widgets</span><span style="color: #007700">\</span><span style="color: #0000BB">ActiveForm</span><span style="color: #007700">::</span><span style="color: #0000BB">begin</span><span style="color: #007700">();&nbsp;</span><span style="color: #0000BB">?&gt;<br /></span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000BB">&lt;?=&nbsp;$form</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">field</span><span style="color: #007700">(</span><span style="color: #0000BB">$model</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'username'</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">?&gt;<br /></span>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000BB">&lt;?=&nbsp;$form</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">field</span><span style="color: #007700">(</span><span style="color: #0000BB">$model</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'password'</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">passwordInput</span><span style="color: #007700">()&nbsp;</span><span style="color: #0000BB">?&gt;<br /></span>&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&nbsp;class="form-group"&gt;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #0000BB">&lt;?=&nbsp;Html</span><span style="color: #007700">::</span><span style="color: #0000BB">submitButton</span><span style="color: #007700">(</span><span style="color: #DD0000">'Login'</span><span style="color: #007700">)&nbsp;</span><span style="color: #0000BB">?&gt;<br /></span>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br /><span style="color: #0000BB">&lt;?php&nbsp;yii</span><span style="color: #007700">\</span><span style="color: #0000BB">widgets</span><span style="color: #007700">\</span><span style="color: #0000BB">ActiveForm</span><span style="color: #007700">::</span><span style="color: #0000BB">end</span><span style="color: #007700">();&nbsp;</span><span style="color: #0000BB">?&gt;</span></code></pre>
<p>Please refer to the <a href="guide-input-forms.html">Creating Forms</a> section for more details.</p>
<h2>Query Builder <a href="#query-builder" name="query-builder" class="hashlink">&para;</a></h2><p>In 1.1, query building was scattered among several classes, including <code>CDbCommand</code>,
<code>CDbCriteria</code>, and <code>CDbCommandBuilder</code>. Yii 2.0 represents a DB query in terms of a <span style="background: #f00;">yii\db\Query</span> object
that can be turned into a SQL statement with the help of <span style="background: #f00;">yii\db\QueryBuilder</span> behind the scene.
For example:</p>
<pre><code class="language-php"><span style="color: #0000BB">$query&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;\</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">db</span><span style="color: #007700">\</span><span style="color: #0000BB">Query</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$query</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">select</span><span style="color: #007700">(</span><span style="color: #DD0000">'id,&nbsp;name'</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">from</span><span style="color: #007700">(</span><span style="color: #DD0000">'user'</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">limit</span><span style="color: #007700">(</span><span style="color: #0000BB">10</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$command&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$query</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">createCommand</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$command</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sql</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$rows&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$command</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">queryAll</span><span style="color: #007700">();</span></code></pre>
<p>Best of all, such query building methods can also be used when working with <a href="guide-db-active-record.html">Active Record</a>.</p>
<p>Please refer to the <a href="guide-db-query-builder.html">Query Builder</a> section for more details.</p>
<h2>Active Record <a href="#active-record" name="active-record" class="hashlink">&para;</a></h2><p>Yii 2.0 introduces a lot of changes to <a href="guide-db-active-record.html">Active Record</a>. The two most obvious ones involve
query building and relational query handling.</p>
<p>The <code>CDbCriteria</code> class in 1.1 is replaced by <span style="background: #f00;">yii\db\ActiveQuery</span> in Yii 2. That class extends from <span style="background: #f00;">yii\db\Query</span>, and thus
inherits all query building methods. You call <span style="background: #f00;">yii\db\ActiveRecord::find()</span> to start building a query:</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #FF8000">//&nbsp;To&nbsp;retrieve&nbsp;all&nbsp;*active*&nbsp;customers&nbsp;and&nbsp;order&nbsp;them&nbsp;by&nbsp;their&nbsp;ID:<br /></span><span style="color: #0000BB">$customers&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Customer</span><span style="color: #007700">::</span><span style="color: #0000BB">find</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">where</span><span style="color: #007700">([</span><span style="color: #DD0000">'status'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">$active</span><span style="color: #007700">])<br />&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">orderBy</span><span style="color: #007700">(</span><span style="color: #DD0000">'id'</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</span><span style="color: #0000BB">all</span><span style="color: #007700">();</span></code></pre>
<p>To declare a relation, simply define a getter method that returns an <span style="background: #f00;">yii\db\ActiveQuery</span> object.
The property name defined by the getter represents the relation name. For example, the following code declares
an <code>orders</code> relation (in 1.1, you would have to declare relations in a central place <code>relations()</code>):</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">class&nbsp;</span><span style="color: #0000BB">Customer&nbsp;</span><span style="color: #007700">extends&nbsp;\</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">db</span><span style="color: #007700">\</span><span style="color: #0000BB">ActiveRecord<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">getOrders</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">hasMany</span><span style="color: #007700">(</span><span style="color: #DD0000">'Order'</span><span style="color: #007700">,&nbsp;[</span><span style="color: #DD0000">'customer_id'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'id'</span><span style="color: #007700">]);<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}</span></code></pre>
<p>Now you can use <code>$customer-&gt;orders</code> to access a customer's orders from the related table. You can also use the following code
to perform an on-the-fly relational query with a customized query condition:</p>
<pre><code class="language-php"><span style="color: #0000BB">$orders&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$customer</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getOrders</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">andWhere</span><span style="color: #007700">(</span><span style="color: #DD0000">'status=1'</span><span style="color: #007700">)-&gt;</span><span style="color: #0000BB">all</span><span style="color: #007700">();</span></code></pre>
<p>When eager loading a relation, Yii 2.0 does it differently from 1.1. In particular, in 1.1 a JOIN query
would be created to select both the primary and the relational records. In Yii 2.0, two SQL statements are executed
without using JOIN: the first statement brings back the primary records and the second brings back the relational
records by filtering with the primary keys of the primary records.</p>
<p>Instead of returning <span style="background: #f00;">yii\db\ActiveRecord</span> objects, you may chain the <span style="background: #f00;">yii\db\ActiveQuery::asArray()</span>
method when building a query to return a large number of records. This will cause the query result to be returned
as arrays, which can significantly reduce the needed CPU time and memory if large number of records . For example:</p>
<pre><code class="language-php"><span style="color: #0000BB">$customers&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">Customer</span><span style="color: #007700">::</span><span style="color: #0000BB">find</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">asArray</span><span style="color: #007700">()-&gt;</span><span style="color: #0000BB">all</span><span style="color: #007700">();</span></code></pre>
<p>Another change is that you can't define attribute default values through public properties anymore.
If you need those, you should set them in the init method of your record class.</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">init</span><span style="color: #007700">()<br />{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">parent</span><span style="color: #007700">::</span><span style="color: #0000BB">init</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">status&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">self</span><span style="color: #007700">::</span><span style="color: #0000BB">STATUS_NEW</span><span style="color: #007700">;<br />}</span></code></pre>
<p>There were some problems with overriding the constructor of an ActiveRecord class in 1.1. These are not present in
version 2.0 anymore. Note that when adding parameters to the constructor you might have to override <span style="background: #f00;">yii\db\ActiveRecord::instantiate()</span>.</p>
<p>There are many other changes and enhancements to Active Record. Please refer to
the <a href="guide-db-active-record.html">Active Record</a> section for more details.</p>
<h2>Active Record Behaviors <a href="#active-record-behaviors" name="active-record-behaviors" class="hashlink">&para;</a></h2><p>In 2.0, we have dropped the base behavior class <code>CActiveRecordBehavior</code>. If you want to create an Active Record Behavior,
you will have to extend directly from <code>yii\base\Behavior</code>. If the behavior class needs to respond to some events
of the owner, you have to override the <code>events()</code> method like the following,</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">namespace&nbsp;</span><span style="color: #0000BB">app</span><span style="color: #007700">\</span><span style="color: #0000BB">components</span><span style="color: #007700">;<br /><br />use&nbsp;</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">db</span><span style="color: #007700">\</span><span style="color: #0000BB">ActiveRecord</span><span style="color: #007700">;<br />use&nbsp;</span><span style="color: #0000BB">yii</span><span style="color: #007700">\</span><span style="color: #0000BB">base</span><span style="color: #007700">\</span><span style="color: #0000BB">Behavior</span><span style="color: #007700">;<br /><br />class&nbsp;</span><span style="color: #0000BB">MyBehavior&nbsp;</span><span style="color: #007700">extends&nbsp;</span><span style="color: #0000BB">Behavior<br /></span><span style="color: #007700">{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;...<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">public&nbsp;function&nbsp;</span><span style="color: #0000BB">events</span><span style="color: #007700">()<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;[<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">ActiveRecord</span><span style="color: #007700">::</span><span style="color: #0000BB">EVENT_BEFORE_VALIDATE&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'beforeValidate'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;</span><span style="color: #0000BB">beforeValidate</span><span style="color: #007700">(</span><span style="color: #0000BB">$event</span><span style="color: #007700">)<br />&nbsp;&nbsp;&nbsp;&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;...<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">}<br />}</span></code></pre>
<h2>User and IdentityInterface <a href="#user-and-identityinterface" name="user-and-identityinterface" class="hashlink">&para;</a></h2><p>The <code>CWebUser</code> class in 1.1 is now replaced by <span style="background: #f00;">yii\web\User</span>, and there is no more
<code>CUserIdentity</code> class. Instead, you should implement the <span style="background: #f00;">yii\web\IdentityInterface</span> which
is much more straightforward to use. The advanced application template provides such an example.</p>
<p>Please refer to the <a href="guide-security-authentication.html">Authentication</a>, <a href="guide-security-authorization.html">Authorization</a>, and <a href="guide-tutorial-advanced-app.html">Advanced Application Technique</a> sections for more details.</p>
<h2>URL Management <a href="#url-management" name="url-management" class="hashlink">&para;</a></h2><p>URL management in Yii 2 is similar to that in 1.1. A major enhancement is that URL management now supports optional
parameters. For example, if you have a rule declared as follows, then it will match
both <code>post/popular</code> and <code>post/1/popular</code>. In 1.1, you would have had to use two rules to achieve
the same goal.</p>
<pre><code class="language-php"><span style="color: #0000BB"></span><span style="color: #007700">[<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'pattern'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'post/&lt;page:\d+&gt;/&lt;tag&gt;'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'route'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #DD0000">'post/index'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'defaults'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;[</span><span style="color: #DD0000">'page'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">],<br />]</span></code></pre>
<p>Please refer to the <a href="guide-runtime-url-handling.html">Url manager docs</a> section for more details.</p>
<h2>Using Yii 1.1 and 2.x together <a href="#using-yii-11-and-2x-together" name="using-yii-11-and-2x-together" class="hashlink">&para;</a></h2><p>If you have legacy Yii 1.1 code that you want to use together with Yii 2.0, please refer to
the <a href="guide-tutorial-yii-integration.html">Using Yii 1.1 and 2.0 Together</a> section.</p>
        <div class="toplink"><a href="#" class="h1" title="go to top"><span class="glyphicon glyphicon-arrow-up"></a></div>
    </div>
</div>


</div>

<footer class="footer">
        <p class="pull-right"><small>Page generated on Fri, 07 Nov 2014 16:32:46 +0800</small></p>
    Powered by <a href="http://www.yiiframework.com/" rel="external">Yii Framework</a></footer>

<script type="text/javascript">jQuery(document).ready(function () {
    var shiftWindow = function () { scrollBy(0, -50) };
    if (location.hash) shiftWindow();
    window.addEventListener("hashchange", shiftWindow);
var element = document.createElement("script");
element.src = "./jssearch.index.js";
document.body.appendChild(element);

var searchBox = $('#searchbox');

// search when typing in search field
searchBox.on("keyup", function(event) {
    var query = $(this).val();

    if (query == '' || event.which == 27) {
        $('#search-resultbox').hide();
        return;
    } else if (event.which == 13) {
        var selectedLink = $('#search-resultbox a.selected');
        if (selectedLink.length != 0) {
            document.location = selectedLink.attr('href');
            return;
        }
    } else if (event.which == 38 || event.which == 40) {
        $('#search-resultbox').show();

        var selected = $('#search-resultbox a.selected');
        if (selected.length == 0) {
            $('#search-results').find('a').first().addClass('selected');
        } else {
            var next;
            if (event.which == 40) {
                next = selected.parent().next().find('a').first();
            } else {
                next = selected.parent().prev().find('a').first();
            }
            if (next.length != 0) {
                var resultbox = $('#search-results');
                var position = next.position();

//              TODO scrolling is buggy and jumps around
//                resultbox.scrollTop(Math.floor(position.top));
//                console.log(position.top);

                selected.removeClass('selected');
                next.addClass('selected');
            }
        }

        return;
    }
    $('#search-resultbox').show();
    $('#search-results').html('<li><span class="no-results">No results</span></li>');

    var result = jssearch.search(query);

    if (result.length > 0) {
        var i = 0;
        var resHtml = '';

        for (var key in result) {
            if (i++ > 20) {
                break;
            }
            resHtml = resHtml +
            '<li><a href="' + result[key].file.u.substr(3) +'"><span class="title">' + result[key].file.t + '</span>' +
            '<span class="description">' + result[key].file.d + '</span></a></li>';
        }
        $('#search-results').html(resHtml);
    }
});

// hide the search results on ESC
$(document).on("keyup", function(event) { if (event.which == 27) { $('#search-resultbox').hide(); } });
// hide search results on click to document
$(document).bind('click', function (e) { $('#search-resultbox').hide(); });
// except the following:
searchBox.bind('click', function(e) { e.stopPropagation(); });
$('#search-resultbox').bind('click', function(e) { e.stopPropagation(); });

});</script></body>
</html>
