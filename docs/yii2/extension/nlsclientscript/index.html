<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    	<meta charset="UTF-8" />
		<meta name="keywords" content="yii framework, extension, Others, ajax, javascript, css, clientscript, merge, minify" />
	<meta name="description" content="NLSClientScript extends the CClientScript class smart loading javascript files and optionally merging/minifying js+css files" />
    <link rel="shortcut icon" type="image/x-icon" href="http://static.yiiframework.com/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="http://static.yiiframework.com/css/site-20130404102234.css" />

	<link title="Lives News for Yii Framework" rel="alternate" type="application/rss+xml" href="http://www.yiiframework.com/rss.xml/" />
	<title>nlsclientscript | Extension | Yii PHP Framework</title>
	<link rel="search" type="application/opensearchdescription+xml" title="Yii API Search" href="/search-api.xml" />
	<link rel="search" type="application/opensearchdescription+xml" title="Yii Site Search" href="/search-site.xml" />
</head>

<body class="mac">
<div class="layout-main">

	<div class="layout-main-shortcuts">
		<div class="container_12">
            <a style="color:darkred;" href="https://github.com/yiisoft/yii2">Github</a> &middot;
            <a style="color:darkgreen;" href="https://twitter.com/yiiframework">Twitter</a> &middot;
            <a style="color:darkblue;" href="https://www.facebook.com/groups/yiitalk/">Facebook</a> &middot;
            <a href="/doc/guide/">Guide</a> &middot;
            <a href="/doc/api/">Class Reference</a> &middot;
            <a href="/doc-2.0/guide-index.html">Guide 2.0</a> &middot;
            <a href="/doc-2.0/index.html">API 2.0</a> &middot;
            <a href="/wiki/">Wiki</a> &middot;
            <a href="/extensions/">Extensions</a> &middot;
            <a href="/forum/">Forum</a> &middot;
			<a href="/chat/">Live Chat</a> &middot;
                            <a href="/login/">Login</a>            		</div>
	</div>

	<div class="layout-main-bg">
		<div class="layout-main-header">
			<div class="container_12">
				<div class="grid_4">
					<a class="logo" href="/"><img alt="Yii Logo" src="http://static.yiiframework.com/css/img/logo.png" title="Yii Framework" width="284" height="64" /></a>				</div>
				<div class="grid_8 omega">
					<div class="nav">
						<ul class="menu" id="yw0">
<li class="about"><a class="main" href="/about/">About</a>
<ul>
<li><a href="/about/">About Yii</a></li>
<li><a href="/features/">Features</a></li>
<li><a href="/performance/">Performance</a></li>
<li><a href="/license/">License</a></li>
<li class="last"><a href="/contact/">Contact Us</a></li>
</ul>
</li>
<li class="downloads active"><a class="main" href="/download/">Downloads</a>
<ul>
<li><a href="/download/">Framework</a></li>
<li class="active"><a href="/extensions/">Extensions</a></li>
<li><a href="/demos/">Demos</a></li>
<li class="last"><a href="/logo/">Logo</a></li>
</ul>
</li>
<li class="documentation"><a class="main" href="/doc/">Documentation</a>
<ul>
<li><a href="/tour/">Take the Tour</a></li>
<li><a href="/tutorials/">Tutorials</a></li>
<li><a href="/doc/api/">Class Reference</a></li>
<li><a href="/doc-2.0/guide-index.html">Guide 2.0</a></li>
<li><a href="/doc-2.0/index.html">Class Reference 2.0</a></li>
<li><a href="/wiki/">Wiki</a></li>
<li><a href="/screencasts/">Screencasts</a></li>
<li class="last"><a href="/resources/">Resources</a></li>
</ul>
</li>
<li class="development"><a class="main" href="https://github.com/yiisoft/yii/commits/master">Development</a>
<ul>
<li><a href="/contribute/">Contribute to Yii</a></li>
<li><a href="https://github.com/yiisoft/yii/commits/master">Latest Updates</a></li>
<li><a href="https://github.com/yiisoft/yii/issues/new">Report a Bug</a></li>
<li class="last"><a href="/security/">Report a Security Issue</a></li>
</ul>
</li>
<li class="community last"><a class="main" href="/community/">Community</a>
<ul>
<li><a href="/forum/">Forum</a></li>
<li><a href="/chat/">Live Chat</a></li>
<li><a href="/news/">News</a></li>
<li><a href="/user/halloffame/">Hall of Fame</a></li>
<li class="last"><a href="/badges/">Badges</a></li>
</ul>
</li>
</ul>						<div class="search">
							<form method="get" action="/search/">
								<div class="keyword">
	                                <input name="q" value="" />
									<a href="#" title="search" class="global-search">search</a>
								</div>
							</form>
						</div>
					</div>
				</div>
				<div class="clear"></div>
			</div>
		</div>

		<div class="container_12">
						<div class="grid_12">
												<div class="layout-main-submenu">
					<ul>
						<li class="main">Downloads</li>
												<li><a href="/download/">Framework</a></li>
												<li class="active"><a href="/extensions/">Extensions</a></li>
												<li><a href="/demos/">Demos</a></li>
												<li><a href="/logo/">Logo</a></li>
											</ul>
				</div>
				
				
				
								<div class="grid_9 alpha">
									<div class="layout-main-body">
						<div class="extension-view">
    	<h1>Yii 1.1: nlsclientscript <a href="https://twitter.com/yiiframework" class="twitter-follow-button" data-link-color="#0069D6" data-show-count="true">Follow @yiiframework</a></h1>

	<div class="tagline">NLSClientScript extends the CClientScript class smart loading javascript files and optionally merging/minifying js+css files</div>

	<div class="g-voter-reporter">
		<a class="widget-reporter" title="Please report to us if you find any inappropriate content." href="/site/report/?type=Extension&amp;id=508"><span>report it</span></a>		<div class="widget-voter"><ul>
	<li class="vote up"><a title="Thumb up" class="g-login" href="/site/vote/?type=Extension&amp;id=508&amp;vote=1"><span>40</span></a></li>
	<li class="vote down"><a title="Thumb down" class="g-login" href="/site/vote/?type=Extension&amp;id=508&amp;vote=0"><span>0</span></a></li>
</ul>
<div class="clear"></div></div>	</div>
	<div class="g-starring">
		<span class="widget-follower"><a class="g-login" title="Click to follow" href="/site/star/?type=Extension&amp;id=508&amp;v=1"><img alt="Click to follow" src="/images/star_off.gif" title="" width="15" height="15" /></a><span>59 followers</span></span>	</div>
	<div class="clear"></div>

	<div class="content g-markdown"><div class="google-ad" style="float:right;margin:0 0 1em 1em;">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-3732587985864947";
google_ad_slot = "7504392189";
google_ad_width = 300;
google_ad_height = 250;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
		<div class="toc"><div class="ref level-2"><a href="#hh0">History</a></div>
<div class="ref level-2"><a href="#hh1">Requirements</a></div>
<div class="ref level-2"><a href="#hh2">Limitations</a></div>
<div class="ref level-2"><a href="#hh3">Usage (v6.3+)</a></div>
<div class="ref level-2"><a href="#hh4">Resources</a></div></div>
<p><strong>Project moved to <a href="https://github.com/nlac" title="github">github</a> as 7.0beta</strong></p>

<p>Motivated by earlier suggestions, a lot of improvements made on the library.</p>

<ul><li>What's new compared to 6.x?

<ul><li>huge refactor</li>
<li>one-file code splitted to parts</li>
<li>completely new css processing part: processing @import-s, url-s</li>
<li>composer support</li>
<li>demo app</li>
<li>moved to github</li>
</ul></li>
</ul><p>Visit <a href="https://github.com/nlac" title="">https://github.com/nlac</a></p>

<hr /><p>NLSClientScript prevents duplicated linking of javascript files when updating a view by ajax, when eg. paging or sorting a gridview, ajax-submitting a form or any custom ajax-updating a part of a view.</p>

<p>The extension does <strong>not</strong> prevent the multiple loading of CSS files. I simply couldn't find a way to manage it clearly (too long to explain here).</p>

<p>The issue what this extenson fights is for example when you render Jui widgets by CHtml::ajax, the js files used by the widget will be loaded as many times as you render such a widget in a view. The unnecessary bandwidth usage is the smaller problem, the bigger problem is eg. loading jquery.js again may reset some js objects set by previously loaded ui-related js files. That can cause js errors and the view may stop working.</p>

<p>Using NLSClientScript helps to avoid it all.</p>

<p>From 6.0, it optionally merges/caches + minifies the registered js and css files.</p>

<h2 id="hh0">History <a class="anchor" href="#hh0">¶</a></h2>

<ul><li>6.7

<ul><li>fixed toAbsUrl() and optimized init() methods (reported + fix by le_top)</li>
</ul></li>
<li>6.6

<ul><li>fixed regexp in normUrl (reported by le_top)</li>
</ul></li>
<li>6.5

<ul><li>fixed buggy behavior when more xhr "script"-dataType requests started for the same script</li>
<li>eliminated deprecated jQuery.browser reference</li>
</ul></li>
<li>6.4

<ul><li>followed the change of the registerScriptFile() arguments in yii 1.1.14</li>
<li>removed/added some comments</li>
</ul></li>
<li><p>6.3</p>

<ul><li>serious bug fixed: filtering duplications (usually) failed when js-merging applied for the response of an xhr request</li>
<li>new params: mergeIfXhr, mergeJsExcludePattern, mergeJsIncludePattern, mergeCssExcludePattern, mergeCssIncludePattern, resMap2Request (see the phpdoc comments in the source for more info)</li>
<li>appended an extra ; to the js files</li>
<li>some other small improvements</li>
</ul></li>
<li><p>6.21</p>

<ul><li>fixed another bug: merged files have been re-generated on every request when the appVersion parameter was used</li>
</ul></li>
<li><p>6.2 (see the updated <strong>Usage</strong>)</p>

<ul><li>fixed a serious bug broke the original functionality when merging happened (duplicates couldn't been recognized)</li>
<li>added a new parameter appVersion</li>
</ul></li>
<li><p>6.1 (see the updated <strong>Usage</strong>)</p>

<ul><li>fixed several bugs (serverBaseUrl composing, merging css files by media correctly)</li>
<li>added parameters mergeAbove, curlTimeOut, curlConnectionTimeOut</li>
</ul></li>
<li><p>6.0 (see the updated <strong>Usage</strong>)</p>

<ul><li>added optional merge and minify functionalities</li>
<li>to keep the simpleness of the single-file extension, embedded JSMin.php from https://github.com/eriknyk/jsmin-php</li>
</ul></li>
<li><p>5.0 (see the updated <strong>Usage</strong>)</p>

<ul><li>in 4.0RC found an issue couldn't worked around: it registered also the script tags being in html/css/js comments, input field, textarea value so i had to drop the native source analysis by regexp. Fortunately found the solution in 5.0 looks like the most perfect till now. Tested successfully in IE7+, latest FF,Chrome,Opera.
Reports about testing are welcome as always.</li>
</ul></li>
<li><p>4.0 RC</p>

<ul><li>refactored, hopefully all bugs reported about 3.x have been eliminated</li>
</ul></li>
<li><p>3.6</p>

<ul><li>fixed a typo</li>
</ul></li>
<li><p>3.5 (see the updated <strong>Usage</strong>)</p>

<ul><li>handling special case when updating a table by tr tag</li>
<li>further IE fixes</li>
<li>added 2 new parameters: ignoredPattern and processedPattern</li>
<li>general refactoring</li>
</ul></li>
<li><p>3.4</p>

<ul><li>fixed non-script-rendering bug in IE</li>
</ul></li>
<li><p>3.3</p>

<ul><li>removes the occasional ...?_=3767454656434 -like timestamps from the url keys used to store/identify the loaded scripts</li>
<li>fixed the accidental naming NLSClientScript to EClientScript</li>
</ul></li>
<li><p>3.2</p>

<ul><li>fixed accessing HEAD element for IE</li>
<li>compressed js code (full source is still there in the php source)</li>
</ul></li>
<li><p>3.1</p>

<ul><li>the extension now prevents the duplicated loading of css files also.</li>
</ul></li>
<li><p>3.0</p>

<ul><li>brand new approach simplifying dramatically the extension and the usage of the extension, based the great idea of <a href="http://www.eirikhoem.net/blog/2011/08/29/yii-framework-preventing-duplicate-jscss-includes-for-ajax-requests/" title="Eirik Hoem">Eirik Hoem</a></li>
<li>see the Usage below!</li>
</ul></li>
<li><p>2.1</p>

<ul><li>dirty fix for a rendering bug of jquery.js v1.6.1 affecting binline=true mode in Yii 1.18</li>
</ul></li>
<li><p>2.0</p>

<ul><li>brand new approach: resource hash stored at the server side, in the webuser state. All these info deleted when a non-ajax request comes</li>
<li>no $.ajax usage - better performance</li>
<li>the extension does not require jquery.js and jquery.yii.js to be linked initially any more</li>
<li>js/css files can be linked from other domain</li>
<li>new parameter: bInlineJs - if true, the scriptFile method will insert the js file content into the html instead of linking the file what can result even better performance</li>
</ul></li>
<li><p>1.3</p>

<ul><li>added cache:true to the ajax js load</li>
<li>compressed core js code</li>
</ul></li>
<li><p>1.2</p>

<ul><li>fixed js error when app not in YII_DEBUG mode</li>
</ul></li>
<li>1.1

<ul><li>hash key generated on server side</li>
<li>two hash key mode: PATH and CONTENT</li>
<li>shortened client-side code</li>
</ul></li>
<li>1.0

<ul><li>base version</li>
</ul></li>
</ul><p>If you interest the details, see the comments in the source.</p>

<h2 id="hh1">Requirements <a class="anchor" href="#hh1">¶</a></h2>

<p>Yii 1.x</p>

<h2 id="hh2">Limitations <a class="anchor" href="#hh2">¶</a></h2>

<ul><li><p>The extension identifies the scripts by its paths so it does <strong>not</strong> prevent to load the same script content from different paths. So eg. if you published the same js file into different asset directories, NLSClientScript considers those to be different and won't prevent to load those several instances.</p></li>
<li><p>The extension doesn't watch wether a js/css file has been changed. If you set the merge functionality and some file changed, you need to delete the cached merged file manually, otherwise you'll get the old merged one.</p></li>
</ul><h2 id="hh3">Usage (v6.3+) <a class="anchor" href="#hh3">¶</a></h2>

<p>1 . Set the class for the clientScript component in /protected/config/main.php, like</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-code">...
</span><span class="hl-quotes">'</span><span class="hl-string">components</span><span class="hl-quotes">'</span><span class="hl-code">=&gt;</span><span class="hl-reserved">array</span><span class="hl-brackets">(</span><span class="hl-code">
  ...
  </span><span class="hl-quotes">'</span><span class="hl-string">clientScript</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-reserved">array</span><span class="hl-brackets">(</span>
    <span class="hl-quotes">'</span><span class="hl-string">class</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-string">your.path.to.NLSClientScript</span><span class="hl-quotes">'</span><span class="hl-code">,
    </span><span class="hl-comment">//</span><span class="hl-comment">'excludePattern' =&gt; '/\.tpl/i', //js regexp, files with matching paths won't be filtered is set to other than 'null'</span>
    <span class="hl-comment">//</span><span class="hl-comment">'includePattern' =&gt; '/\.php/', //js regexp, only files with matching paths will be filtered if set to other than 'null'</span>
 
    <span class="hl-quotes">'</span><span class="hl-string">mergeJs</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-reserved">true</span><span class="hl-code">, </span><span class="hl-comment">//</span><span class="hl-comment">def:true</span>
    <span class="hl-quotes">'</span><span class="hl-string">compressMergedJs</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-reserved">false</span><span class="hl-code">, </span><span class="hl-comment">//</span><span class="hl-comment">def:false</span>
 
    <span class="hl-quotes">'</span><span class="hl-string">mergeCss</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-reserved">true</span><span class="hl-code">, </span><span class="hl-comment">//</span><span class="hl-comment">def:true</span>
    <span class="hl-quotes">'</span><span class="hl-string">compressMergedCss</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-reserved">false</span><span class="hl-code">, </span><span class="hl-comment">//</span><span class="hl-comment">def:false</span>
 
    <span class="hl-quotes">'</span><span class="hl-string">mergeJsExcludePattern</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-string">/edit_area/</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-comment">//</span><span class="hl-comment">won't merge js files with matching names</span>
 
    <span class="hl-quotes">'</span><span class="hl-string">mergeIfXhr</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-reserved">true</span><span class="hl-code">, </span><span class="hl-comment">//</span><span class="hl-comment">def:false, if true-&gt;attempts to merge the js files even if the request was xhr (if all other merging conditions are satisfied)</span>
 
    <span class="hl-quotes">'</span><span class="hl-string">serverBaseUrl</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-string">http://localhost</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-comment">//</span><span class="hl-comment">can be optionally set here</span>
    <span class="hl-quotes">'</span><span class="hl-string">mergeAbove</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-number">1</span><span class="hl-code">, </span><span class="hl-comment">//</span><span class="hl-comment">def:1, only "more than this value" files will be merged,</span>
    <span class="hl-quotes">'</span><span class="hl-string">curlTimeOut</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-number">10</span><span class="hl-code">, </span><span class="hl-comment">//</span><span class="hl-comment">def:10, see curl_setopt() doc</span>
    <span class="hl-quotes">'</span><span class="hl-string">curlConnectionTimeOut</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-number">10</span><span class="hl-code">, </span><span class="hl-comment">//</span><span class="hl-comment">def:10, see curl_setopt() doc</span>
 
    <span class="hl-quotes">'</span><span class="hl-string">appVersion</span><span class="hl-quotes">'</span><span class="hl-code">=&gt;</span><span class="hl-number">1</span><span class="hl-number">.0</span> <span class="hl-comment">//</span><span class="hl-comment">if set, it will be appended to the urls of the merged scripts/css</span>
  <span class="hl-brackets">)</span><span class="hl-code">
  ...
</span><span class="hl-brackets">)</span>
 
<span class="hl-reserved">For</span> <span class="hl-identifier">more</span> <span class="hl-identifier">information</span> <span class="hl-identifier">about</span> <span class="hl-identifier">the</span> <span class="hl-identifier">parameters</span><span class="hl-code">, </span><span class="hl-identifier">see</span> <span class="hl-identifier">the</span> <span class="hl-identifier">header</span> <span class="hl-identifier">comment</span> <span class="hl-identifier">of</span> <span class="hl-identifier">NLSClientScript</span><span class="hl-code">.</span><span class="hl-identifier">php</span><span class="hl-code">.</span></pre></div></div>

<p>2 . use Yii::app()-&gt;getClientScript() by the standard way to link js and css files/snippets</p>

<p>Example:</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-var">$cs</span><span class="hl-code"> = </span><span class="hl-identifier">Yii</span><span class="hl-code">::</span><span class="hl-identifier">app</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">-&gt;</span><span class="hl-identifier">getClientScript</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-var">$systemJsPath</span><span class="hl-code"> = </span><span class="hl-identifier">Yii</span><span class="hl-code">::</span><span class="hl-identifier">app</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">-&gt;</span><span class="hl-identifier">getAssetManager</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">-&gt;</span><span class="hl-identifier">publish</span><span class="hl-brackets">(</span> <span class="hl-identifier">Yii</span><span class="hl-code">::</span><span class="hl-identifier">getPathOfAlias</span><span class="hl-brackets">(</span> <span class="hl-quotes">'</span><span class="hl-string">system.web.js</span><span class="hl-quotes">'</span> <span class="hl-brackets">)</span><span class="hl-code">, </span><span class="hl-reserved">false</span><span class="hl-code">, -</span><span class="hl-number">1</span><span class="hl-code">, </span><span class="hl-reserved">false</span> <span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-var">$cs</span><span class="hl-code">-&gt;</span><span class="hl-identifier">registerScriptFile</span><span class="hl-brackets">(</span> <span class="hl-var">$systemJsPath</span><span class="hl-code"> . </span><span class="hl-quotes">'</span><span class="hl-string">/ext/yii_ext.js</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">;
</span><span class="hl-var">$cs</span><span class="hl-code">-&gt;</span><span class="hl-identifier">registerScriptFile</span><span class="hl-brackets">(</span> <span class="hl-var">$systemJsPath</span><span class="hl-code"> . </span><span class="hl-quotes">'</span><span class="hl-string">/ext/plugins/jquery.form.js</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">;</span></pre></div></div>

<p>3 . <strong>DOES NOT WORK FROM v5.0</strong>: If you want to do a custom ajax request with "dataType"="json" and there are some fields of the response you want to update your page with, filter that part "by hand" with $.ajaxSettings.dataFilter like eg.:</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-reserved">echo</span> <span class="hl-identifier">CHtml</span><span class="hl-code">::</span><span class="hl-identifier">ajaxLink</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">custom update</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-reserved">array</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">/site/testupdate</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">, </span><span class="hl-reserved">array</span><span class="hl-brackets">(</span>
 
  <span class="hl-quotes">'</span><span class="hl-string">dataType</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-quotes">'</span><span class="hl-string">json</span><span class="hl-quotes">'</span><span class="hl-code">,
 
  </span><span class="hl-quotes">'</span><span class="hl-string">success</span><span class="hl-quotes">'</span><span class="hl-code">=&gt;</span><span class="hl-quotes">'</span><span class="hl-string">js:function(data){ $("#cont").html($.ajaxSettings.dataFilter(data.content)); }</span><span class="hl-quotes">'</span><span class="hl-code">,
 
</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;</span></pre></div></div>

<h2 id="hh4">Resources <a class="anchor" href="#hh4">¶</a></h2>

<ul><li><a href="http://nlacsoft.net/nlsclientscript/">Project page, demo</a></li>
<li><a href="https://github.com/nlac/nlsclientscript">GitHub page</a></li>
</ul>	</div>

	<div class="google-ad" style="margin:10px 0 10px 200px;">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-3732587985864947";
google_ad_slot = "5681577484";
google_ad_width = 300;
google_ad_height = 250;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div><div class="widget-comment-list" id="comments">
	<div class="comments">
		<h3>Total 20 comments</h3>
				<div class="comment alt-0">
			<a class="cid" id="c18789" title="permalink to this comment" href="#c18789">#18789</a>
			<a class="widget-reporter" title="Please report to us if you find any inappropriate content." href="/site/report/?type=Comment&amp;id=18789"><span>report it</span></a>			<div class="widget-voter"><ul>
	<li class="vote up"><a title="Thumb up" class="g-login" href="/site/vote/?type=Comment&amp;id=18789&amp;vote=1"><span>0</span></a></li>
	<li class="vote down"><a title="Thumb down" class="g-login" href="/site/vote/?type=Comment&amp;id=18789&amp;vote=0"><span>0</span></a></li>
</ul>
<div class="clear"></div></div>			<div class="meta"><a class="g-user-rank-link" href="/user/23510/">nlac</a> at 2015/01/08 04:00pm</div>
			<div class="title">#le_top</div>
			<div class="content"><p>Hmm hardcore stuffs:) Interesting, as i remember i definitely tested the 7.0 with  CGridView (not sure i did it with CListView) and didn't noticed any trouble...</p>

<p>Could you pls descibe the original issue you experienced, regarding the conflict of NLSClientScript and CGridView/CListView? It is still not clear for me and to be honest i stopped digging into the further details from that point. I got confused from the "afterAjaxUpdate" thing - it was already an attempt to solve an issue or it was the case when the issue happened? Sorry maybe i'm too tired right now and missed something in the description:)</p>
</div>
					</div>
				<div class="comment alt-1">
			<a class="cid" id="c18758" title="permalink to this comment" href="#c18758">#18758</a>
			<a class="widget-reporter" title="Please report to us if you find any inappropriate content." href="/site/report/?type=Comment&amp;id=18758"><span>report it</span></a>			<div class="widget-voter"><ul>
	<li class="vote up"><a title="Thumb up" class="g-login" href="/site/vote/?type=Comment&amp;id=18758&amp;vote=1"><span>0</span></a></li>
	<li class="vote down"><a title="Thumb down" class="g-login" href="/site/vote/?type=Comment&amp;id=18758&amp;vote=0"><span>0</span></a></li>
</ul>
<div class="clear"></div></div>			<div class="meta"><a class="g-user-rank-link silver" href="/user/5458/">le_top</a> at 2014/12/29 04:00pm</div>
			<div class="title">CGridView/CListView</div>
			<div class="content"><p>NLSClientScript is an excellent extension but it does not work very well for the content of CGridView and CListView.
I had to face that issue once more and I decided to have a deeper look and I found a solution.</p>

<p>First, we can rely on the 'afterAjaxUpdate' parameter of the CListView/CGridView like this:</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-var">$this</span><span class="hl-code">-&gt;</span><span class="hl-identifier">widget</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">zii.widgets.CListView</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-reserved">array</span><span class="hl-brackets">(</span>
        <span class="hl-comment">//</span><span class="hl-comment">...</span>
        <span class="hl-quotes">'</span><span class="hl-string">afterAjaxUpdate</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-quotes">"</span><span class="hl-string">function(id,data){jQuery('body').append(jQuery(data).filter('script:not(</span><span class="hl-special">\"</span><span class="hl-string">[src]</span><span class="hl-special">\"</span><span class="hl-string">)'));}</span><span class="hl-quotes">"</span><span class="hl-code">,
</span><span class="hl-brackets">)</span><span class="hl-brackets">)</span><span class="hl-code">;</span></pre></div></div>

<p>That works but the second time you will try the Ajax reload will happen twice, the third time three times, etc.  The "issue" is with the core library but <a href="http://www.yiiframework.com/forum/index.php/topic/27521-cbuttoncolumn-click-live-event-attached-multiple-times-when-entire-grid-widget-is-replaced-through-ajax/page__p__132577#entry132577" title="not accepted as a bug">was not accepted as a bug</a> three years ago so here are the changes I apply after each Yii update for that (I just discovered the change needed for yiilistview.js as I have not been using that until recently).</p>

<p>CButtonColumn:</p>

<p>To remove the 'on' event on a grid before setting it.</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-reserved">if</span><span class="hl-brackets">(</span><span class="hl-reserved">true</span><span class="hl-brackets">)</span> <span class="hl-brackets">{</span>
 <span class="hl-var">$class</span><span class="hl-code">=</span><span class="hl-identifier">preg_replace</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">/\s+/</span><span class="hl-quotes">'</span><span class="hl-code">,</span><span class="hl-quotes">'</span><span class="hl-string">.</span><span class="hl-quotes">'</span><span class="hl-code">,</span><span class="hl-var">$button</span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">options</span><span class="hl-quotes">'</span><span class="hl-brackets">]</span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">class</span><span class="hl-quotes">'</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code">;
 </span><span class="hl-var">$js</span><span class="hl-brackets">[</span><span class="hl-brackets">]</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">if(typeof(_gridf)==='undefined'){_gridf={};}</span><span class="hl-quotes">"</span><span class="hl-code">
  .</span><span class="hl-quotes">"</span><span class="hl-string">if(typeof(_gridf['on-</span><span class="hl-var">{$this-&gt;grid-&gt;id}-{$class}'])!=='undefined') {jQuery(document).off('click','#{$this-&gt;grid-&gt;id} a.{$class}',_gridf['on-{$this-&gt;grid-&gt;id}-{$class}']);}</span><span class="hl-quotes">"</span><span class="hl-code">
  .</span><span class="hl-quotes">"</span><span class="hl-string">_gridf['on-</span><span class="hl-var">{$this-&gt;grid-&gt;id}-{$class}</span><span class="hl-string">']=</span><span class="hl-var">$function</span><span class="hl-string">;</span><span class="hl-quotes">"</span><span class="hl-code">
  .</span><span class="hl-quotes">"</span><span class="hl-string">jQuery(document).on('click','#</span><span class="hl-var">{$this-&gt;grid-&gt;id} a.{$class}',_gridf['on-{$this-&gt;grid-&gt;id}-{$class}</span><span class="hl-string">']);</span><span class="hl-quotes">"</span><span class="hl-code">;
</span><span class="hl-brackets">}</span> <span class="hl-reserved">else</span> <span class="hl-brackets">{</span> <span class="hl-comment">//</span><span class="hl-comment"> Original code.</span>
  <span class="hl-var">$class</span><span class="hl-code">=</span><span class="hl-identifier">preg_replace</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">/\s+/</span><span class="hl-quotes">'</span><span class="hl-code">,</span><span class="hl-quotes">'</span><span class="hl-string">.</span><span class="hl-quotes">'</span><span class="hl-code">,</span><span class="hl-var">$button</span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">options</span><span class="hl-quotes">'</span><span class="hl-brackets">]</span><span class="hl-brackets">[</span><span class="hl-quotes">'</span><span class="hl-string">class</span><span class="hl-quotes">'</span><span class="hl-brackets">]</span><span class="hl-brackets">)</span><span class="hl-code">;
  </span><span class="hl-var">$js</span><span class="hl-brackets">[</span><span class="hl-brackets">]</span><span class="hl-code">=</span><span class="hl-quotes">"</span><span class="hl-string">jQuery('#</span><span class="hl-var">{$this-&gt;grid-&gt;id} a.{$class}</span><span class="hl-string">').live('click',</span><span class="hl-var">$function</span><span class="hl-string">);</span><span class="hl-quotes">"</span><span class="hl-code">;
</span><span class="hl-brackets">}</span></pre></div></div>

<p>jquery.yiigridview.js:</p>

<p>Add lines to switch off event listeners before defining them.
-&gt; There is a potential issue that there are other listeners using the same selector that might be deleted.
-&gt; However, the risk is low because the selector is specific and likely to be used by the yiiGridView only.</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-code">$</span><span class="hl-brackets">(</span><span class="hl-builtin">document</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">off</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">click.yiiGridView</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">#</span><span class="hl-quotes">'</span><span class="hl-code"> + </span><span class="hl-identifier">id</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-string"> .</span><span class="hl-quotes">'</span><span class="hl-code"> + </span><span class="hl-identifier">settings</span><span class="hl-code">.</span><span class="hl-identifier">tableClass</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-string"> &gt; tbody &gt; tr</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">;
$</span><span class="hl-brackets">(</span><span class="hl-builtin">document</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">on</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">click.yiiGridView</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">#</span><span class="hl-quotes">'</span><span class="hl-code"> + </span><span class="hl-identifier">id</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-string"> .</span><span class="hl-quotes">'</span><span class="hl-code"> + </span><span class="hl-identifier">settings</span><span class="hl-code">.</span><span class="hl-identifier">tableClass</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-string"> &gt; tbody &gt; tr</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-reserved">function</span> <span class="hl-brackets">(</span><span class="hl-identifier">e</span><span class="hl-brackets">)</span> <span class="hl-brackets">{</span></pre></div></div>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-code">$</span><span class="hl-brackets">(</span><span class="hl-builtin">document</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">off</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">click.yiiGridView</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">#</span><span class="hl-quotes">'</span><span class="hl-code"> + </span><span class="hl-identifier">id</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-string"> .select-on-check-all</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">;
$</span><span class="hl-brackets">(</span><span class="hl-builtin">document</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">on</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">click.yiiGridView</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-quotes">'</span><span class="hl-string">#</span><span class="hl-quotes">'</span><span class="hl-code"> + </span><span class="hl-identifier">id</span><span class="hl-code"> + </span><span class="hl-quotes">'</span><span class="hl-string"> .select-on-check-all</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-reserved">function</span> <span class="hl-brackets">(</span><span class="hl-brackets">)</span> <span class="hl-brackets">{</span></pre></div></div>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-code">$</span><span class="hl-brackets">(</span><span class="hl-identifier">document</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">off</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">change.yiiGridView keydown.yiiGridView</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-identifier">settings</span><span class="hl-code">.</span><span class="hl-identifier">filterSelector</span><span class="hl-brackets">)</span><span class="hl-code">;
$</span><span class="hl-brackets">(</span><span class="hl-identifier">document</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">on</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">change.yiiGridView keydown.yiiGridView</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-identifier">settings</span><span class="hl-code">.</span><span class="hl-identifier">filterSelector</span><span class="hl-code">, </span><span class="hl-reserved">function</span> <span class="hl-brackets">(</span><span class="hl-identifier">event</span><span class="hl-brackets">)</span> <span class="hl-brackets">{</span></pre></div></div>

<p>jquery.yiilistview.js:</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-code">$</span><span class="hl-brackets">(</span><span class="hl-builtin">document</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">off</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">click.yiiListView</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-identifier">settings</span><span class="hl-code">.</span><span class="hl-identifier">updateSelector</span><span class="hl-brackets">)</span><span class="hl-code">;
$</span><span class="hl-brackets">(</span><span class="hl-builtin">document</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">on</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">click.yiiListView</span><span class="hl-quotes">'</span><span class="hl-code">, </span><span class="hl-identifier">settings</span><span class="hl-code">.</span><span class="hl-identifier">updateSelector</span><span class="hl-code">,</span><span class="hl-reserved">function</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-brackets">{</span></pre></div></div>

<p>Have fun with it!</p>
</div>
					</div>
				<div class="comment alt-0">
			<a class="cid" id="c18614" title="permalink to this comment" href="#c18614">#18614</a>
			<a class="widget-reporter" title="Please report to us if you find any inappropriate content." href="/site/report/?type=Comment&amp;id=18614"><span>report it</span></a>			<div class="widget-voter"><ul>
	<li class="vote up"><a title="Thumb up" class="g-login" href="/site/vote/?type=Comment&amp;id=18614&amp;vote=1"><span>0</span></a></li>
	<li class="vote down"><a title="Thumb down" class="g-login" href="/site/vote/?type=Comment&amp;id=18614&amp;vote=0"><span>0</span></a></li>
</ul>
<div class="clear"></div></div>			<div class="meta"><a class="g-user-rank-link" href="/user/232368/">samarhaider</a> at 2014/12/02 07:01am</div>
			<div class="title">Very Cool </div>
			<div class="content"><p>Very Good extension, Its solve my issue as well as it boost my application speed</p>
</div>
					</div>
				<div class="comment alt-1">
			<a class="cid" id="c17951" title="permalink to this comment" href="#c17951">#17951</a>
			<a class="widget-reporter" title="Please report to us if you find any inappropriate content." href="/site/report/?type=Comment&amp;id=17951"><span>report it</span></a>			<div class="widget-voter"><ul>
	<li class="vote up"><a title="Thumb up" class="g-login" href="/site/vote/?type=Comment&amp;id=17951&amp;vote=1"><span>0</span></a></li>
	<li class="vote down"><a title="Thumb down" class="g-login" href="/site/vote/?type=Comment&amp;id=17951&amp;vote=0"><span>0</span></a></li>
</ul>
<div class="clear"></div></div>			<div class="meta"><a class="g-user-rank-link silver" href="/user/5458/">le_top</a> at 2014/08/15 03:56am</div>
			<div class="title">CSS urls</div>
			<div class="content"><p>Hi
I suggest that you mention the limitation for the CSS at least in the notes above, and also in the comments of the source code (e.g., as a comment to the variable enabling the merge).</p>

<p>Also, while the comments say that Js and CSS merging are disabled by default, they are actually active by default in the extension.  I recommend to keep buggy/limited options inactive - so CSS merging should really be false because relative Urls are essential (to the framework CSS for starters).  If things do not work "immediately", many developers  try and abandon the extension.</p>

<p>I understand the limitation of time completely - you'll likely add proper Css merging when you are in need of it yourself, which is fully understandable.  That's why I generally fix bugs myself, the difficulty is often to get them into the official release.</p>
</div>
					</div>
				<div class="comment alt-0">
			<a class="cid" id="c17949" title="permalink to this comment" href="#c17949">#17949</a>
			<a class="widget-reporter" title="Please report to us if you find any inappropriate content." href="/site/report/?type=Comment&amp;id=17949"><span>report it</span></a>			<div class="widget-voter"><ul>
	<li class="vote up"><a title="Thumb up" class="g-login" href="/site/vote/?type=Comment&amp;id=17949&amp;vote=1"><span>0</span></a></li>
	<li class="vote down"><a title="Thumb down" class="g-login" href="/site/vote/?type=Comment&amp;id=17949&amp;vote=0"><span>0</span></a></li>
</ul>
<div class="clear"></div></div>			<div class="meta"><a class="g-user-rank-link" href="/user/23510/">nlac</a> at 2014/08/15 02:14am</div>
			<div class="title">@le_top</div>
			<div class="content"><p>Yep, i'm aware that url issue in the merged css, that was a topic in some earlier commments (btw not sure why only the top 20 comments are shown, near 90 comments are here). It's a plan to allow configuring a 3rd pary service to do the proper merging (or handle it properly without 3rd party, still not sure how much work it is).
Anyway it requires effort, i can't say will be done in some weeks, but it is in my list (as other things...:( ).</p>
</div>
					</div>
				<div class="comment alt-1">
			<a class="cid" id="c17926" title="permalink to this comment" href="#c17926">#17926</a>
			<a class="widget-reporter" title="Please report to us if you find any inappropriate content." href="/site/report/?type=Comment&amp;id=17926"><span>report it</span></a>			<div class="widget-voter"><ul>
	<li class="vote up"><a title="Thumb up" class="g-login" href="/site/vote/?type=Comment&amp;id=17926&amp;vote=1"><span>0</span></a></li>
	<li class="vote down"><a title="Thumb down" class="g-login" href="/site/vote/?type=Comment&amp;id=17926&amp;vote=0"><span>0</span></a></li>
</ul>
<div class="clear"></div></div>			<div class="meta"><a class="g-user-rank-link silver" href="/user/5458/">le_top</a> at 2014/08/12 01:32am</div>
			<div class="title">CSS merging and relative resources</div>
			<div class="content"><p>Hi
Now that merging is working, I'v done a few tests.
Css merging has an important issue: relative resources are not rebased.</p>

<p>Example:</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-identifier">.grid-view</span> <span class="hl-identifier">table</span><span class="hl-identifier">.items</span> <span class="hl-identifier">th</span> <span class="hl-brackets">{</span>
    <span class="hl-reserved">color:</span> <span class="hl-var">white</span><span class="hl-code">;
    </span><span class="hl-reserved">background:</span> <span class="hl-code">url</span><span class="hl-code">("</span><span class="hl-code">bg</span><span class="hl-code">.</span><span class="hl-code">gif</span><span class="hl-code">") </span><span class="hl-string">repeat-x</span> <span class="hl-string">scroll</span> <span class="hl-string">left</span> <span class="hl-string">top</span> <span class="hl-var">white</span><span class="hl-code">;
    </span><span class="hl-reserved">text-align:</span> <span class="hl-string">center</span>
<span class="hl-brackets">}</span></pre></div></div>

<p>After merging, the navigators looks in the assets folder for 'bg.gif', but it is not there.</p>

<p>Other issues with combining CSS files can be expected, and it might be a good idea to rely on an existing open source to do the job.</p>
</div>
					</div>
				<div class="comment alt-0">
			<a class="cid" id="c17925" title="permalink to this comment" href="#c17925">#17925</a>
			<a class="widget-reporter" title="Please report to us if you find any inappropriate content." href="/site/report/?type=Comment&amp;id=17925"><span>report it</span></a>			<div class="widget-voter"><ul>
	<li class="vote up"><a title="Thumb up" class="g-login" href="/site/vote/?type=Comment&amp;id=17925&amp;vote=1"><span>1</span></a></li>
	<li class="vote down"><a title="Thumb down" class="g-login" href="/site/vote/?type=Comment&amp;id=17925&amp;vote=0"><span>0</span></a></li>
</ul>
<div class="clear"></div></div>			<div class="meta"><a class="g-user-rank-link" href="/user/23510/">nlac</a> at 2014/08/11 07:47pm</div>
			<div class="title">@moa, @le_top</div>
			<div class="content"><p>@moa: when the error comes, when the page is loaded or at the first partial update? I guess the second case, i suspect the fancybox plugin has broken due to loading again a js file (maybe fancybox.pack or other). Please check with Firebug what js file is loaded twice - remember if you refer a js once xxx.js?v=2.14, later xxx.js or xxx.js?v=2.15, NLSClientScript will consider those files to be different and won't prevent to load again. Please normalize the url's, to be the same for the same js content.</p>

<p>@le_top: nice, i'll test it and add to the next version, thx.</p>
</div>
					</div>
				<div class="comment alt-1">
			<a class="cid" id="c17924" title="permalink to this comment" href="#c17924">#17924</a>
			<a class="widget-reporter" title="Please report to us if you find any inappropriate content." href="/site/report/?type=Comment&amp;id=17924"><span>report it</span></a>			<div class="widget-voter"><ul>
	<li class="vote up"><a title="Thumb up" class="g-login" href="/site/vote/?type=Comment&amp;id=17924&amp;vote=1"><span>1</span></a></li>
	<li class="vote down"><a title="Thumb down" class="g-login" href="/site/vote/?type=Comment&amp;id=17924&amp;vote=0"><span>0</span></a></li>
</ul>
<div class="clear"></div></div>			<div class="meta"><a class="g-user-rank-link silver" href="/user/5458/">le_top</a> at 2014/08/11 04:54pm</div>
			<div class="title">Fix for compression bug</div>
			<div class="content"><p>Hi
I found the solution for the compression bug.
Just add the following line to the initCurlHandler method:</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-identifier">curl_setopt</span><span class="hl-brackets">(</span><span class="hl-var">$this</span><span class="hl-code">-&gt;</span><span class="hl-identifier">ch</span><span class="hl-code">, </span><span class="hl-identifier">CURLOPT_ENCODING</span><span class="hl-code">, </span><span class="hl-quotes">"</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">;</span></pre></div></div>
</div>
					</div>
				<div class="comment alt-0">
			<a class="cid" id="c17922" title="permalink to this comment" href="#c17922">#17922</a>
			<a class="widget-reporter" title="Please report to us if you find any inappropriate content." href="/site/report/?type=Comment&amp;id=17922"><span>report it</span></a>			<div class="widget-voter"><ul>
	<li class="vote up"><a title="Thumb up" class="g-login" href="/site/vote/?type=Comment&amp;id=17922&amp;vote=1"><span>0</span></a></li>
	<li class="vote down"><a title="Thumb down" class="g-login" href="/site/vote/?type=Comment&amp;id=17922&amp;vote=0"><span>0</span></a></li>
</ul>
<div class="clear"></div></div>			<div class="meta"><a class="g-user-rank-link" href="/user/77586/">msoa</a> at 2014/08/11 01:31pm</div>
			<div class="title">problem in mergeJs to false</div>
			<div class="content"><p>Thanks for your work
I have this code in widget:</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-reserved">public</span> <span class="hl-reserved">function</span> <span class="hl-identifier">init</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span>
    <span class="hl-brackets">{</span>
        <span class="hl-var">$assetsPath</span><span class="hl-code"> = </span><span class="hl-identifier">Yii</span><span class="hl-code">::</span><span class="hl-identifier">getPathOfAlias</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">application.widgets.gallery.assets</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-var">$assetsUrl</span><span class="hl-code"> = </span><span class="hl-identifier">Yii</span><span class="hl-code">::</span><span class="hl-identifier">app</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">-&gt;</span><span class="hl-identifier">assetManager</span><span class="hl-code">-&gt;</span><span class="hl-identifier">publish</span><span class="hl-brackets">(</span><span class="hl-var">$assetsPath</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-identifier">Yii</span><span class="hl-code">::</span><span class="hl-identifier">app</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">-&gt;</span><span class="hl-identifier">clientScript</span><span class="hl-code">-&gt;</span><span class="hl-identifier">registerCssFile</span><span class="hl-brackets">(</span><span class="hl-var">$assetsUrl</span><span class="hl-code">.</span><span class="hl-quotes">'</span><span class="hl-string">/gallery.css</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-identifier">Yii</span><span class="hl-code">::</span><span class="hl-identifier">app</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">-&gt;</span><span class="hl-identifier">clientScript</span><span class="hl-code">-&gt;</span><span class="hl-identifier">registerScriptFile</span><span class="hl-brackets">(</span><span class="hl-var">$assetsUrl</span><span class="hl-code">.</span><span class="hl-quotes">'</span><span class="hl-string">/gallery.js</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-comment">//</span><span class="hl-comment"> fancybox</span>
        <span class="hl-identifier">Yii</span><span class="hl-code">::</span><span class="hl-identifier">app</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">-&gt;</span><span class="hl-identifier">clientScript</span><span class="hl-code">-&gt;</span><span class="hl-identifier">registerCssFile</span><span class="hl-brackets">(</span><span class="hl-var">$assetsUrl</span><span class="hl-code">.</span><span class="hl-quotes">'</span><span class="hl-string">/fancybox/source/jquery.fancybox.css?v=2.1.5</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-identifier">Yii</span><span class="hl-code">::</span><span class="hl-identifier">app</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">-&gt;</span><span class="hl-identifier">clientScript</span><span class="hl-code">-&gt;</span><span class="hl-identifier">registerScriptFile</span><span class="hl-brackets">(</span><span class="hl-var">$assetsUrl</span><span class="hl-code">.</span><span class="hl-quotes">'</span><span class="hl-string">/fancybox/lib/jquery.mousewheel-3.0.6.pack.js</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">;
        </span><span class="hl-identifier">Yii</span><span class="hl-code">::</span><span class="hl-identifier">app</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">-&gt;</span><span class="hl-identifier">clientScript</span><span class="hl-code">-&gt;</span><span class="hl-identifier">registerScriptFile</span><span class="hl-brackets">(</span><span class="hl-var">$assetsUrl</span><span class="hl-code">.</span><span class="hl-quotes">'</span><span class="hl-string">/fancybox/source/jquery.fancybox.pack.js?v=2.1.5</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span></pre></div></div>

<p>But when i set mergeJs to false:</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-quotes">'</span><span class="hl-string">mergeJs</span><span class="hl-quotes">'</span><span class="hl-code"> =&gt; </span><span class="hl-reserved">false</span><span class="hl-code">, </span><span class="hl-comment">//</span><span class="hl-comment">def:true</span></pre></div></div>

<p>I get this error:</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-identifier">TypeError</span><span class="hl-code">: $</span><span class="hl-brackets">(</span><span class="hl-code">...</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">fancybox</span> <span class="hl-identifier">is</span> <span class="hl-identifier">not</span> <span class="hl-identifier">a</span> <span class="hl-reserved">function</span><span class="hl-code">
$</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">.fancybox</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">fancybox</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;</span></pre></div></div>

<p>How i can resolve it?</p>
</div>
					</div>
				<div class="comment alt-1">
			<a class="cid" id="c17912" title="permalink to this comment" href="#c17912">#17912</a>
			<a class="widget-reporter" title="Please report to us if you find any inappropriate content." href="/site/report/?type=Comment&amp;id=17912"><span>report it</span></a>			<div class="widget-voter"><ul>
	<li class="vote up"><a title="Thumb up" class="g-login" href="/site/vote/?type=Comment&amp;id=17912&amp;vote=1"><span>1</span></a></li>
	<li class="vote down"><a title="Thumb down" class="g-login" href="/site/vote/?type=Comment&amp;id=17912&amp;vote=0"><span>0</span></a></li>
</ul>
<div class="clear"></div></div>			<div class="meta"><a class="g-user-rank-link silver" href="/user/5458/">le_top</a> at 2014/08/10 04:32pm</div>
			<div class="title">Compression issue</div>
			<div class="content"><p>Well, the absUrl fix is integrated ;-).</p>

<p>The compression issue is that the resulting file contains gzip compressed content, and is not related to content minimized (or compacted) by JsMin.</p>
</div>
					</div>
				<div class="comment alt-0">
			<a class="cid" id="c17911" title="permalink to this comment" href="#c17911">#17911</a>
			<a class="widget-reporter" title="Please report to us if you find any inappropriate content." href="/site/report/?type=Comment&amp;id=17911"><span>report it</span></a>			<div class="widget-voter"><ul>
	<li class="vote up"><a title="Thumb up" class="g-login" href="/site/vote/?type=Comment&amp;id=17911&amp;vote=1"><span>0</span></a></li>
	<li class="vote down"><a title="Thumb down" class="g-login" href="/site/vote/?type=Comment&amp;id=17911&amp;vote=0"><span>0</span></a></li>
</ul>
<div class="clear"></div></div>			<div class="meta"><a class="g-user-rank-link" href="/user/23510/">nlac</a> at 2014/08/10 04:20pm</div>
			<div class="title">@le_top</div>
			<div class="content"><p>Ok, somehow i skipped the toAbsUrl issue last time, focused only the second comment.. the fixes seem to be fine, have been added now.
About the compression issue, the compression is done by the embedded JSMin.php, that project is unfortunately abandoned, no further buxfixes provided. Possible minification issues should be work-arounded, eg. deal with originally minified files and just concat them by NLSClientScript.</p>
</div>
					</div>
				<div class="comment alt-1">
			<a class="cid" id="c17908" title="permalink to this comment" href="#c17908">#17908</a>
			<a class="widget-reporter" title="Please report to us if you find any inappropriate content." href="/site/report/?type=Comment&amp;id=17908"><span>report it</span></a>			<div class="widget-voter"><ul>
	<li class="vote up"><a title="Thumb up" class="g-login" href="/site/vote/?type=Comment&amp;id=17908&amp;vote=1"><span>1</span></a></li>
	<li class="vote down"><a title="Thumb down" class="g-login" href="/site/vote/?type=Comment&amp;id=17908&amp;vote=0"><span>0</span></a></li>
</ul>
<div class="clear"></div></div>			<div class="meta"><a class="g-user-rank-link silver" href="/user/5458/">le_top</a> at 2014/08/09 06:57pm</div>
			<div class="title">Fix(es)</div>
			<div class="content"><p>Ok for dataFilter - I suppose that is why my JSON calls do not seem to give any trouble.  Some of the logic is done behind the scenes so I thought it did not apply.</p>

<p>I also reported about the 'toAbsUrl' method which is equally important.  Otherwise combining(merging) scripts/css is not functional for 'localhost/workspace/index.php' or '//blabla.google.com/blabla'. A resource like 'themes/mytheme/js/script.js' would not work without one of the fixes for toAbsUrl.</p>

<p>Anyway, I also had some kind of compression issue where the combined file had compressed content - but only on the production server, so I suppose it has to do with compression from the content served by the production server and not with content served from third parties.</p>
</div>
					</div>
				<div class="comment alt-0">
			<a class="cid" id="c17907" title="permalink to this comment" href="#c17907">#17907</a>
			<a class="widget-reporter" title="Please report to us if you find any inappropriate content." href="/site/report/?type=Comment&amp;id=17907"><span>report it</span></a>			<div class="widget-voter"><ul>
	<li class="vote up"><a title="Thumb up" class="g-login" href="/site/vote/?type=Comment&amp;id=17907&amp;vote=1"><span>0</span></a></li>
	<li class="vote down"><a title="Thumb down" class="g-login" href="/site/vote/?type=Comment&amp;id=17907&amp;vote=0"><span>0</span></a></li>
</ul>
<div class="clear"></div></div>			<div class="meta"><a class="g-user-rank-link" href="/user/23510/">nlac</a> at 2014/08/09 04:36pm</div>
			<div class="title">@le_top</div>
			<div class="content"><p>Thanks for the bug hunt, i added the fix.</p>

<p>About the old trick you pointed ($.ajaxSettings.dataFilter(data)), there's no need for that at all. From 5.0, the extension is rewritten in a totally different way, so you can work with any json ajax response without any neccessary post-processing.</p>
</div>
					</div>
				<div class="comment alt-1">
			<a class="cid" id="c17904" title="permalink to this comment" href="#c17904">#17904</a>
			<a class="widget-reporter" title="Please report to us if you find any inappropriate content." href="/site/report/?type=Comment&amp;id=17904"><span>report it</span></a>			<div class="widget-voter"><ul>
	<li class="vote up"><a title="Thumb up" class="g-login" href="/site/vote/?type=Comment&amp;id=17904&amp;vote=1"><span>1</span></a></li>
	<li class="vote down"><a title="Thumb down" class="g-login" href="/site/vote/?type=Comment&amp;id=17904&amp;vote=0"><span>0</span></a></li>
</ul>
<div class="clear"></div></div>			<div class="meta"><a class="g-user-rank-link silver" href="/user/5458/">le_top</a> at 2014/08/08 06:23pm</div>
			<div class="title">Duplicate library load fixed...</div>
			<div class="content"><p>The core mystery has been solved: my url had a trailing '&amp;' after removing the '<em>='.
That is because I added a timestamp to the assets which postfixes the urls with '?'  which becomes '?&amp;</em>='.</p>

<p>So the normUrl function had to be updated with:</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-reserved">return</span> <span class="hl-identifier">url</span><span class="hl-code">.</span><span class="hl-identifier">replace</span><span class="hl-brackets">(</span><span class="hl-code">/\?*\&amp;?</span><span class="hl-brackets">(</span><span class="hl-identifier">_</span><span class="hl-code">=\</span><span class="hl-identifier">d</span><span class="hl-code">+</span><span class="hl-brackets">)</span><span class="hl-code">?$/</span><span class="hl-identifier">g</span><span class="hl-code">,</span><span class="hl-quotes">"</span><span class="hl-quotes">"</span><span class="hl-brackets">)</span><span class="hl-code">;</span></pre></div></div>

<p>Finally, any plan to provide an alternative to</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-code">$.</span><span class="hl-identifier">ajaxSettings</span><span class="hl-code">.</span><span class="hl-identifier">dataFilter</span><span class="hl-brackets">(</span><span class="hl-identifier">data</span><span class="hl-brackets">)</span></pre></div></div>

<p>?</p>
</div>
					</div>
				<div class="comment alt-0">
			<a class="cid" id="c17902" title="permalink to this comment" href="#c17902">#17902</a>
			<a class="widget-reporter" title="Please report to us if you find any inappropriate content." href="/site/report/?type=Comment&amp;id=17902"><span>report it</span></a>			<div class="widget-voter"><ul>
	<li class="vote up"><a title="Thumb up" class="g-login" href="/site/vote/?type=Comment&amp;id=17902&amp;vote=1"><span>1</span></a></li>
	<li class="vote down"><a title="Thumb down" class="g-login" href="/site/vote/?type=Comment&amp;id=17902&amp;vote=0"><span>0</span></a></li>
</ul>
<div class="clear"></div></div>			<div class="meta"><a class="g-user-rank-link silver" href="/user/5458/">le_top</a> at 2014/08/08 04:56pm</div>
			<div class="title">Issues - some solutions</div>
			<div class="content"><p>I was still using 5.0, but for some reason my jQuery gets loaded two times when fetching a CJuiDialog through Ajax.  So I was digging into that issue and decided to upgrade to the latest version to see if things were fixed.</p>

<p>Actually things are worse.  My page layout and javascript were completely "scrambled".
First, the function to combine files is on by default and some "urls" were not found.
Second, my production server serves compressed files and they remain compressed after combining - they should be combined uncompressed!</p>

<p>The missing urls issue could be fixed by fixing the way the absUrl is computed.
The following code works for me:</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-reserved">protected</span> <span class="hl-reserved">function</span> <span class="hl-identifier">toAbsUrl</span><span class="hl-brackets">(</span><span class="hl-var">$relUrl</span><span class="hl-brackets">)</span> <span class="hl-brackets">{</span>
        <span class="hl-reserved">if</span><span class="hl-brackets">(</span><span class="hl-identifier">substr</span><span class="hl-brackets">(</span><span class="hl-var">$relUrl</span><span class="hl-code">,</span><span class="hl-number">0</span><span class="hl-code">,</span><span class="hl-number">2</span><span class="hl-brackets">)</span><span class="hl-code">===</span><span class="hl-quotes">'</span><span class="hl-string">//</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span>
            <span class="hl-reserved">return</span> <span class="hl-brackets">(</span><span class="hl-identifier">Yii</span><span class="hl-code">::</span><span class="hl-identifier">app</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">-&gt;</span><span class="hl-identifier">getRequest</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">-&gt;</span><span class="hl-identifier">getIsSecureConnection</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">?</span><span class="hl-quotes">'</span><span class="hl-string">https:</span><span class="hl-quotes">'</span><span class="hl-code">:</span><span class="hl-quotes">'</span><span class="hl-string">http:</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-var">$relUrl</span><span class="hl-code">;
        </span><span class="hl-reserved">else</span>
            <span class="hl-reserved">return</span> <span class="hl-identifier">preg_match</span><span class="hl-brackets">(</span><span class="hl-quotes">'</span><span class="hl-string">&amp;^(http(s?):)?//&amp;</span><span class="hl-quotes">'</span><span class="hl-code">,</span><span class="hl-var">$relUrl</span><span class="hl-brackets">)</span><span class="hl-code"> ? </span><span class="hl-var">$relUrl</span><span class="hl-code"> : </span><span class="hl-identifier">rtrim</span><span class="hl-brackets">(</span><span class="hl-var">$this</span><span class="hl-code">-&gt;</span><span class="hl-identifier">serverBaseUrl</span><span class="hl-code">,</span><span class="hl-quotes">'</span><span class="hl-string">/</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code"> . </span><span class="hl-quotes">'</span><span class="hl-string">/</span><span class="hl-quotes">'</span><span class="hl-code"> . </span><span class="hl-brackets">(</span><span class="hl-identifier">substr</span><span class="hl-brackets">(</span><span class="hl-var">$relUrl</span><span class="hl-code">,</span><span class="hl-number">0</span><span class="hl-code">,</span><span class="hl-number">1</span><span class="hl-brackets">)</span><span class="hl-code">===</span><span class="hl-quotes">'</span><span class="hl-string">/</span><span class="hl-quotes">'</span><span class="hl-code">?</span><span class="hl-quotes">'</span><span class="hl-quotes">'</span><span class="hl-code">:</span><span class="hl-identifier">Yii</span><span class="hl-code">::</span><span class="hl-identifier">app</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">-&gt;</span><span class="hl-identifier">getRequest</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">-&gt;</span><span class="hl-identifier">getBaseUrl</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-quotes">'</span><span class="hl-string">/</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">.</span><span class="hl-identifier">ltrim</span><span class="hl-brackets">(</span><span class="hl-var">$relUrl</span><span class="hl-code">,</span><span class="hl-quotes">'</span><span class="hl-string">/</span><span class="hl-quotes">'</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-brackets">}</span></pre></div></div>

<p>Changes are that if the url starts with '//' that only the scheme is prefixed.
Also, when the url starts with '/', the path is absolute from the host, but when the '/' is missing, the url is relative, so 'baseUrl' has to be added, which is also done above.</p>

<p>I prefer using Yii methods if they exist, so in 'init()', I changed a few lines:</p>

<div class="hl-code"><div class="hl-main"><pre><span class="hl-reserved">if</span> <span class="hl-brackets">(</span><span class="hl-code">!</span><span class="hl-var">$this</span><span class="hl-code">-&gt;</span><span class="hl-identifier">serverBaseUrl</span><span class="hl-brackets">)</span> <span class="hl-brackets">{</span>
            <span class="hl-var">$this</span><span class="hl-code">-&gt;</span><span class="hl-identifier">serverBaseUrl</span><span class="hl-code">=</span><span class="hl-identifier">Yii</span><span class="hl-code">::</span><span class="hl-identifier">app</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">-&gt;</span><span class="hl-identifier">getRequest</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">-&gt;</span><span class="hl-identifier">getHostInfo</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">;</span></pre></div></div>

<p>So that works on my dev machine, but not on the server where compressed content is combined.  I haven't checked that issue yet.  I have now disabled combining again.</p>

<p>I still have the dual jQuery loading, so I continue to look into that core issue for me.</p>
</div>
					</div>
				<div class="comment alt-1">
			<a class="cid" id="c17862" title="permalink to this comment" href="#c17862">#17862</a>
			<a class="widget-reporter" title="Please report to us if you find any inappropriate content." href="/site/report/?type=Comment&amp;id=17862"><span>report it</span></a>			<div class="widget-voter"><ul>
	<li class="vote up"><a title="Thumb up" class="g-login" href="/site/vote/?type=Comment&amp;id=17862&amp;vote=1"><span>0</span></a></li>
	<li class="vote down"><a title="Thumb down" class="g-login" href="/site/vote/?type=Comment&amp;id=17862&amp;vote=0"><span>0</span></a></li>
</ul>
<div class="clear"></div></div>			<div class="meta"><a class="g-user-rank-link" href="/user/23510/">nlac</a> at 2014/07/31 05:55pm</div>
			<div class="title">moving to github</div>
			<div class="content"><p>good point, it would have several advantages. i registered it on my todo list:)</p>
</div>
					</div>
				<div class="comment alt-0">
			<a class="cid" id="c17851" title="permalink to this comment" href="#c17851">#17851</a>
			<a class="widget-reporter" title="Please report to us if you find any inappropriate content." href="/site/report/?type=Comment&amp;id=17851"><span>report it</span></a>			<div class="widget-voter"><ul>
	<li class="vote up"><a title="Thumb up" class="g-login" href="/site/vote/?type=Comment&amp;id=17851&amp;vote=1"><span>0</span></a></li>
	<li class="vote down"><a title="Thumb down" class="g-login" href="/site/vote/?type=Comment&amp;id=17851&amp;vote=0"><span>0</span></a></li>
</ul>
<div class="clear"></div></div>			<div class="meta"><a class="g-user-rank-link bronze" href="/user/6843/">marcovtwout</a> at 2014/07/31 04:19am</div>
			<div class="title">GitHub</div>
			<div class="content"><p>Would you consider moving the source code to GitHub and adding Composer support? :)</p>
</div>
					</div>
				<div class="comment alt-1">
			<a class="cid" id="c17161" title="permalink to this comment" href="#c17161">#17161</a>
			<a class="widget-reporter" title="Please report to us if you find any inappropriate content." href="/site/report/?type=Comment&amp;id=17161"><span>report it</span></a>			<div class="widget-voter"><ul>
	<li class="vote up"><a title="Thumb up" class="g-login" href="/site/vote/?type=Comment&amp;id=17161&amp;vote=1"><span>0</span></a></li>
	<li class="vote down"><a title="Thumb down" class="g-login" href="/site/vote/?type=Comment&amp;id=17161&amp;vote=0"><span>0</span></a></li>
</ul>
<div class="clear"></div></div>			<div class="meta"><a class="g-user-rank-link" href="/user/23510/">nlac</a> at 2014/05/08 11:28am</div>
			<div class="title">@yanhui</div>
			<div class="content"><p>I didn't experienced yet op. system incompatibility regarding nlsclientscript. I contacted you for details through your forum profile.</p>
</div>
					</div>
				<div class="comment alt-0">
			<a class="cid" id="c17125" title="permalink to this comment" href="#c17125">#17125</a>
			<a class="widget-reporter" title="Please report to us if you find any inappropriate content." href="/site/report/?type=Comment&amp;id=17125"><span>report it</span></a>			<div class="widget-voter"><ul>
	<li class="vote up"><a title="Thumb up" class="g-login" href="/site/vote/?type=Comment&amp;id=17125&amp;vote=1"><span>0</span></a></li>
	<li class="vote down"><a title="Thumb down" class="g-login" href="/site/vote/?type=Comment&amp;id=17125&amp;vote=0"><span>0</span></a></li>
</ul>
<div class="clear"></div></div>			<div class="meta"><a class="g-user-rank-link" href="/user/30151/">yanhui</a> at 2014/05/05 11:49pm</div>
			<div class="title">@nlac Maybe compatibility problem work with Linux?</div>
			<div class="content"><p>Your reply is appreciated, thanks for your attention, nlac.<br />
nlsclientscript works fine in my develop pc (win8.1/xampp1.8.3),<br />
today I found it doesn't works properly in my server environment (centos6.4/lampp1.8.3).<br />
The error messages in browser like follow:<br />
-Uncaught ReferenceError: $ is not defined nls1858337492.js:79<br />
-Uncaught ReferenceError: jQuery is not defined index.php:28<br />
After some googling, I found someone may meets the same problem.<br />
-<a href="http://stackoverflow.com/questions/21679474/nlsclientscript-errors" title="http://stackoverflow.com/questions/21679474/nlsclientscript-errors">http://stackoverflow.com/questions/21679474/nlsclientscript-errors</a><br />
-<a href="https://github.com/yiisoft/yii/issues/604" title="https://github.com/yiisoft/yii/issues/604">https://github.com/yiisoft/yii/issues/604</a></p>
</div>
					</div>
				<div class="comment alt-1">
			<a class="cid" id="c17121" title="permalink to this comment" href="#c17121">#17121</a>
			<a class="widget-reporter" title="Please report to us if you find any inappropriate content." href="/site/report/?type=Comment&amp;id=17121"><span>report it</span></a>			<div class="widget-voter"><ul>
	<li class="vote up"><a title="Thumb up" class="g-login" href="/site/vote/?type=Comment&amp;id=17121&amp;vote=1"><span>0</span></a></li>
	<li class="vote down"><a title="Thumb down" class="g-login" href="/site/vote/?type=Comment&amp;id=17121&amp;vote=0"><span>0</span></a></li>
</ul>
<div class="clear"></div></div>			<div class="meta"><a class="g-user-rank-link" href="/user/23510/">nlac</a> at 2014/05/05 01:38pm</div>
			<div class="title">@yanhui + @fad</div>
			<div class="content"><p>yes, i'm aware of that problem, there is no url transformation in the content implemented when merging css. Since many people miss that feature I'll try to work out a solution soon.
Till that time, pls do not use the css merging.</p>
</div>
					</div>
			</div>
	<div id="comment-add">
		<h3 id="add-comment">Leave a comment</h3>

			<p>Please <a class="g-login" rel="/extension/nlsclientscript/#add-comment" href="#">login</a> to leave your comment.</p>
		</div>
</div>
</div>

					</div>
								</div>
				
								<div class="grid_3 omega">
					<div class="layout-main-right">
						<div class="extension-portlets">
	<a href="/ext/create/" class="btn btn-success btn-large action">Create extension</a>

<div class="widget-search-box">
    <form method="get" action="/search/">
        <strong>Search Extensions</strong>
		<input type="text" name="q" class="keyword g-text" />
        <input type="hidden" name="type" value="extension" />
        <input type="hidden" name="lang" value="" />
        <input type="submit" value="Find" class="btn btn-info" />
	</form>
</div><div class="downloads">
    <strong>Downloads</strong>
        <ul class="g-list-none">
                <li>&raquo; <a title="NLSClientScriptv6.7.zip" href="/extension/nlsclientscript/files/NLSClientScriptv6.7.zip">NLSClientScriptv6.7.zip</a></li>
                <li>&raquo; <a title="NLSClientScriptv6.6.zip" href="/extension/nlsclientscript/files/NLSClientScriptv6.6.zip">NLSClientScriptv6.6.zip</a></li>
                <li>&raquo; <a title="NLSClientScriptv6.5.zip" href="/extension/nlsclientscript/files/NLSClientScriptv6.5.zip">NLSClientScriptv6.5.zip</a></li>
            </ul>
    <div class="see-all"><a href="/ext/files/?id=508">See all &raquo;</a></div>
    </div>
<ul class="info g-list-none">
    <li><b>Yii Version</b>: <b>1.1</b></li>
    <li><b>License</b>: <a target="_blank" rel="nofollow" href="http://www.opensource.org/licenses/bsd-license.php">New BSD License</a></li>
    <li><b>Developed by</b>: <a class="g-user-rank-link" href="/user/23510/">nlac</a></li>
    <li><b>Category</b>: <a href="/extensions/?category=14">Others</a></li>
    <li><b>Votes</b>: <span class="g-vote plus" title="40 votes up">+40</span></li>
    <li><b>Downloaded</b>: 5,169 times</li>
    <li><b>Created on</b>: Jun 1, 2011</li>
    <li><b>Last updated</b>: Jan 8, 2015</li>
        <li><b>Tags</b>: <a href="/extensions/?tag=ajax">ajax</a>, <a href="/extensions/?tag=javascript">javascript</a>, <a href="/extensions/?tag=css">css</a>, <a href="/extensions/?tag=clientscript">clientscript</a>, <a href="/extensions/?tag=merge">merge</a>, <a href="/extensions/?tag=minify">minify</a></li>
    </ul>

<div class="widget-related-contents">
<strong>Related Extensions</strong><ul><li><a class="" href="/extension/noscript/">noscript</a></li>
<li><a class="" href="/extension/dojo/">dojo</a></li>
<li><a class="" href="/extension/less/">less</a></li>
<li><a class="" href="/extension/echosen/">echosen</a></li>
<li><a class="" href="/extension/assetcompiler/">assetcompiler</a></li>
</ul>
</div>	<div class="google-ad" style="margin:100px 0 0 10px;">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-3732587985864947";
google_ad_slot = "9764720390";
google_ad_width = 160;
google_ad_height = 600;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
</div>					</div>
				</div>
								<div class="clear"></div>
			</div>
			<div class="clear"></div>
					</div>
	</div>

	<div class="layout-main-footer">
		<div class="container_12">
			<div class="grid_6">
				<ul class="menu">
				<li class="main">About
<ul class="sub">
<li><a href="/about/">About Yii</a></li>
<li><a href="/features/">Features</a></li>
<li><a href="/performance/">Performance</a></li>
<li><a href="/license/">License</a></li>
<li><a href="/contact/">Contact Us</a></li>
</ul>
</li>
<li class="main">Downloads
<ul class="sub">
<li><a href="/download/">Framework</a></li>
<li><a href="/extensions/">Extensions</a></li>
<li><a href="/demos/">Demos</a></li>
<li><a href="/logo/">Logo</a></li>
</ul>
</li>
<li class="main">Documentation
<ul class="sub">
<li><a href="/tour/">Take the Tour</a></li>
<li><a href="/tutorials/">Tutorials</a></li>
<li><a href="/doc/api/">Class Reference</a></li>
<li><a href="/doc-2.0/guide-index.html">Guide 2.0</a></li>
<li><a href="/doc-2.0/index.html">Class Reference 2.0</a></li>
<li><a href="/wiki/">Wiki</a></li>
<li><a href="/screencasts/">Screencasts</a></li>
<li><a href="/resources/">Resources</a></li>
</ul>
</li>
<li class="main">Development
<ul class="sub">
<li><a href="/contribute/">Contribute to Yii</a></li>
<li><a href="https://github.com/yiisoft/yii/commits/master">Latest Updates</a></li>
<li><a href="https://github.com/yiisoft/yii/issues/new">Report a Bug</a></li>
<li><a href="/security/">Report a Security Issue</a></li>
</ul>
</li>
<li class="main">Community
<ul class="sub">
<li><a href="/forum/">Forum</a></li>
<li><a href="/chat/">Live Chat</a></li>
<li><a href="/news/">News</a></li>
<li><a href="/user/halloffame/">Hall of Fame</a></li>
<li><a href="/badges/">Badges</a></li>
</ul>
</li>
				</ul>
			</div>
			<div class="grid_1">&nbsp;</div>
			<div class="grid_5">
				<h3>Yii Supporters</h3>
				<ul class="g-list-none supporters">

				</ul>
			</div>

			<div class="clear"></div>
			<div class="grid_12 copyright">
				<ul class="social">
					<li class="twitter"><a href="https://twitter.com/yiiframework" target="_blank" rel="nofollow" title="follow us on twitter">Twitter</a></li>
					<li class="facebook"><a href="https://www.facebook.com/groups/yiitalk/" target="_blank" rel="nofollow" title="join yii group at facebook">Facebook</a></li>
					<li class="linkedin"><a href="http://www.linkedin.com/groups?gid=1483367" target="_blank" rel="nofollow" title="join yii group at linkedin">LinkedIn</a></li>
					<li class="feeds"><a title="RSS feeds" href="/rss.xml/">RSS Feeds</a></li>
				</ul>
				<div class="clear"></div>
				<a href="/tos/">Terms of Service</a> |
				<a href="/license/">License</a> |
				<a href="/contact/">Contact Us</a><br/>
				Copyright &copy; 2015 by <a href="http://www.yiisoft.com">Yii Software LLC</a>.
				All Rights Reserved.
			</div>
			<div class="clear"></div>
		</div>
	</div>
</div>

    <script type="text/javascript" src="/js/site-20121004195728.js"></script>


<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['site._setAccount', 'UA-5843896-1']);
_gaq.push(['site._trackPageview']);

(function() {
	var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>
<script type="text/javascript">
function trackClick(link, action, category) {
	action=action || link.href;
	category=category || 'Outbound Links';
	try {
		_gaq.push(['site._trackEvent', category, action]);
		setTimeout('document.location = "' + link.href + '"', 250);
	}catch(err){}
	return false;
}
</script>
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
<script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
</body>
</html>
